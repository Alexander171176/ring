import{o as C,A as b,P as _,D as u,H as o,k as s,I as c,J as d,u as e,L as U,x as z,G as h,U as D,ag as L,y as N}from"./vue-DrbZvlgE.js";import{a as H,u as I,T as S}from"./app-Bp8GUED0.js";import{_ as F,t as E}from"./MetatagsButton-Dkqzb1E_.js";import{A as O}from"./AdminLayout-m43ZpFmT.js";import{T as q}from"./TitlePage-CVAOVWeu.js";import{_ as M}from"./DefaultButton-B4OupGBJ.js";import{_ as m,a as f,b as P}from"./InputText-DBtoU87u.js";import{_ as p,a as x,b as v}from"./InputNumber-D963n_HP.js";import"./ckeditor-Dh_eORW-.js";import{_ as j}from"./MetaDescTextarea-DjPUZo-s.js";import{_ as n}from"./InputError-CDoDc20f.js";import{_ as G,a as J}from"./TinyEditor-CxBa4bIm.js";import{_ as K}from"./MultiImageUpload-Cl2NMbU3.js";import{s as w}from"./vue-multiselect.min.css_vue_type_style_index_0_src_true_lang-DWHVxuBV.js";import{_ as Q}from"./VideoSourceFields-B8t305XQ.js";import"./vendor-CGnu3J7H.js";import"./ScrollButtons-DwaEk0p5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-Cy7DQwuF.js";import"./LocaleSelectOption-DauWSBmB.js";import"./auth-image-XbvYdkSi.js";const R={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},W={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},X={class:"sm:flex sm:justify-between sm:items-center mb-2"},Y=o("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Z=o("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),ee={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},le={class:"flex flex-row items-center gap-2"},te={class:"flex flex-row items-center gap-2 w-auto"},se={class:"flex flex-row items-center gap-2"},oe={class:"h-8 flex items-center"},ae={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},re={class:"flex flex-row items-center gap-2"},ie={class:"flex flex-row items-center gap-2"},de={class:"flex flex-row items-center gap-2"},me={class:"mb-3 flex flex-col items-start"},ne={class:"mb-3 flex flex-col items-start"},ue={class:"mb-3 flex flex-col items-start"},ce=o("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),fe={class:"mb-3 flex flex-col items-start"},_e=o("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),pe={class:"mb-3 flex flex-col items-start"},xe={class:"flex justify-between w-full"},ve={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ge={class:"mb-3 flex flex-col items-start"},be={class:"mb-3 flex flex-col lg:flex-row sm:justify-between sm:space-x-4"},he={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},we={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},ye={class:"mb-3 flex flex-col lg:flex-row lg:justify-between lg:space-x-4"},Ve={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},ke={value:"local"},Ue={value:"youtube"},Me={value:"vimeo"},je={value:"code"},$e={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1 justify-between"},Te={class:"flex flex-col items-start"},Ae={key:0,class:"mt-4"},Be=["innerHTML"],Ce={class:"mb-3 flex flex-col items-start"},ze={class:"mb-3 flex flex-col sm:flex-row justify-between"},De={class:"flex flex-row items-center mb-2"},Le={class:"flex flex-row items-center"},Ne={class:"mb-3 flex flex-col items-start"},He={class:"flex justify-between w-full"},Ie={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Se={class:"mb-3 flex flex-col items-start"},Fe={class:"flex justify-between w-full"},Ee={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Oe={class:"mb-3 flex flex-col items-start"},qe={class:"flex justify-between w-full"},Pe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ge={class:"flex justify-end mt-4"},Je=o("svg",{class:"w-4 h-4 fill-current text-slate-600 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M13 7h2v6a1 1 0 01-1 1H4v2l-4-3 4-3v2h9V7zM3 9H1V3a1 1 0 011-1h10V0l4 3-4 3V4H3v5z"})],-1),Ke={class:"flex items-center justify-center mt-4"},Qe=o("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[o("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Re=o("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[o("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),vl={__name:"Create",props:{sections:Array,articles:Array,images:Array,related_videos:{type:Array,default:()=>[]}},setup(g){const y=H(),{t:r}=I(),l=S({sort:0,locale:"",title:"",url:"",short:"",description:"",author:"",published_at:"",views:0,likes:0,meta_title:"",meta_keywords:"",meta_desc:"",activity:!1,left:!1,main:!1,right:!1,sections:[],articles:[],related_videos:[],images:[],embed_code:"",source_type:"local",duration:"",external_video_id:"",video_url:"",video_file:null}),$=i=>{if(!i)return"";const t=new Date(i);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]};C(()=>{l.published_at&&(l.published_at=$(l.published_at))});const T=()=>{l.title&&(l.url=E(l.title.toLowerCase()))},V=(i,t,a=!1)=>{if(i.length<=t)return i;const k=i.substr(0,i.lastIndexOf(" ",t));return a?`${k}...`:k},A=()=>{if(l.title&&!l.meta_title&&(l.meta_title=V(l.title,160)),l.short&&!l.meta_keywords){const i=l.short.replace(/(<([^>]+)>)/gi,"");l.meta_keywords=i.split(/\s+/).filter(t=>t.length>0).join(", ")}l.short&&!l.meta_desc&&(l.meta_desc=V(l.short.replace(/(<([^>]+)>)/gi,""),255,!0))},B=()=>{l.transform(i=>({...i,activity:i.activity?1:0,left:i.left?1:0,main:i.main?1:0,right:i.right?1:0,images:l.images.map(t=>{if(t.file)return{file:t.file,order:t.order,alt:t.alt,caption:t.caption};if(t.id)return{id:Number(t.id),order:t.order,alt:t.alt,caption:t.caption}}).filter(Boolean)})),l.post(route("admin.videos.store"),{preserveScroll:!0,onSuccess:()=>{y.success("Видео успешно создано!")},onError:i=>{console.error("Не удалось отправить форму:",i);const t=i[Object.keys(i)[0]];y.error(t||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(i,t)=>(_(),b(O,{title:e(r)("addVideo")},{header:u(()=>[s(q,null,{default:u(()=>[c(d(e(r)("addVideo")),1)]),_:1})]),default:u(()=>[o("div",R,[o("div",W,[o("div",X,[s(M,{href:i.route("admin.videos.index")},{icon:u(()=>[Y]),default:u(()=>[c(" "+d(e(r)("back")),1)]),_:1},8,["href"]),Z]),o("form",{onSubmit:U(B,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[o("div",ee,[o("div",le,[s(p,{modelValue:e(l).activity,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).activity=a)},null,8,["modelValue"]),s(x,{for:"activity",text:e(r)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",te,[s(G,{modelValue:e(l).locale,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).locale=a),errorMessage:e(l).errors.locale},null,8,["modelValue","errorMessage"]),s(n,{class:"mt-2 lg:mt-0",message:e(l).errors.locale},null,8,["message"])]),o("div",se,[o("div",oe,[s(m,{for:"sort",value:e(r)("sort"),class:"text-sm"},null,8,["value"])]),s(v,{id:"sort",type:"number",modelValue:e(l).sort,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).sort=a),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),s(n,{class:"mt-2 lg:mt-0",message:e(l).errors.sort},null,8,["message"])])]),o("div",ae,[o("div",re,[s(p,{modelValue:e(l).left,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).left=a)},null,8,["modelValue"]),s(x,{for:"left",text:e(r)("left"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",ie,[s(p,{modelValue:e(l).main,"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).main=a)},null,8,["modelValue"]),s(x,{for:"main",text:e(r)("main"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),o("div",de,[s(p,{modelValue:e(l).right,"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).right=a)},null,8,["modelValue"]),s(x,{for:"right",text:e(r)("right"),class:"text-sm h-8 flex items-center"},null,8,["text"])])]),o("div",me,[s(m,{for:"sections",value:e(r)("sections"),class:"mb-1"},null,8,["value"]),s(e(w),{modelValue:e(l).sections,"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).sections=a),options:g.sections,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),o("div",ne,[s(m,{for:"articles",value:e(r)("articles"),class:"mb-1"},null,8,["value"]),s(e(w),{modelValue:e(l).articles,"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).articles=a),options:g.articles,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),o("div",ue,[s(m,{for:"title"},{default:u(()=>[ce,c(" "+d(e(r)("name")),1)]),_:1}),s(f,{id:"title",type:"text",modelValue:e(l).title,"onUpdate:modelValue":t[8]||(t[8]=a=>e(l).title=a),required:"",autocomplete:"title"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.title},null,8,["message"])]),o("div",fe,[s(m,{for:"url"},{default:u(()=>[_e,c(" "+d(e(r)("url")),1)]),_:1}),s(f,{id:"url",type:"text",modelValue:e(l).url,"onUpdate:modelValue":t[9]||(t[9]=a=>e(l).url=a),required:"",autocomplete:"url",onFocus:T},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.url},null,8,["message"])]),o("div",pe,[o("div",xe,[s(m,{for:"short",value:e(r)("shortDescription")},null,8,["value"]),o("div",ve,d(e(l).short.length)+" / 255 "+d(e(r)("characters")),1)]),s(j,{modelValue:e(l).short,"onUpdate:modelValue":t[10]||(t[10]=a=>e(l).short=a),class:"w-full"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.short},null,8,["message"])]),o("div",ge,[s(m,{for:"description",value:e(r)("description")},null,8,["value"]),s(J,{modelValue:e(l).description,"onUpdate:modelValue":t[11]||(t[11]=a=>e(l).description=a),height:500},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.description},null,8,["message"])]),o("div",be,[o("div",he,[s(m,{for:"published_at",value:e(r)("publishedAt"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(f,{id:"published_at",type:"date",modelValue:e(l).published_at,"onUpdate:modelValue":t[12]||(t[12]=a=>e(l).published_at=a),autocomplete:"published_at",class:"w-full max-w-56"},null,8,["modelValue"]),s(n,{class:"mt-1 sm:mt-0",message:e(l).errors.published_at},null,8,["message"])]),o("div",we,[s(m,{for:"author",value:e(r)("postAuthor"),class:"w-40 mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(f,{id:"author",type:"text",modelValue:e(l).author,"onUpdate:modelValue":t[13]||(t[13]=a=>e(l).author=a),autocomplete:"author",class:"w-full"},null,8,["modelValue"]),s(n,{class:"mt-1 sm:mt-0",message:e(l).errors.author},null,8,["message"])])]),o("div",ye,[o("div",Ve,[s(m,{for:"source_type",value:e(r)("sourceType"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),D(o("select",{id:"source_type","onUpdate:modelValue":t[14]||(t[14]=a=>e(l).source_type=a),class:"form-select px-2 py-0.5 min-w-[12rem] font-semibold text-sm rounded-sm shadow-sm dark:bg-cyan-800 dark:text-slate-100 border-slate-500 focus:border-indigo-500 focus:ring-indigo-300"},[o("option",ke,d(e(r)("local")),1),o("option",Ue,d(e(r)("youtube")),1),o("option",Me,d(e(r)("vimeo")),1),o("option",je,d(e(r)("code")),1)],512),[[L,e(l).source_type]]),s(n,{class:"mt-1 lg:mt-0",message:e(l).errors.source_type},null,8,["message"])]),o("div",$e,[s(m,{for:"duration",value:e(r)("duration"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(v,{id:"duration",type:"number",modelValue:e(l).duration,"onUpdate:modelValue":t[15]||(t[15]=a=>e(l).duration=a),autocomplete:"duration",class:"w-full max-w-24"},null,8,["modelValue"]),s(n,{class:"mt-1 lg:mt-0",message:e(l).errors.duration},null,8,["message"])])]),o("div",Te,[s(Q,{modelValue:e(l).source_type,"onUpdate:modelValue":t[16]||(t[16]=a=>e(l).source_type=a),"video-url":e(l).video_url,"onUpdate:videoUrl":t[17]||(t[17]=a=>e(l).video_url=a),"external-video-id":e(l).external_video_id,"onUpdate:externalVideoId":t[18]||(t[18]=a=>e(l).external_video_id=a),"video-file":e(l).video_file,"onUpdate:videoFile":t[19]||(t[19]=a=>e(l).video_file=a),"embed-code":e(l).embed_code,"onUpdate:embedCode":t[20]||(t[20]=a=>e(l).embed_code=a)},null,8,["modelValue","video-url","external-video-id","video-file","embed-code"]),e(l).errors.embed_code?(_(),b(n,{key:0,class:"mt-2",message:e(l).errors.embed_code},null,8,["message"])):h("",!0),e(l).errors.external_video_id?(_(),b(n,{key:1,class:"mt-2",message:e(l).errors.external_video_id},null,8,["message"])):h("",!0)]),e(l).source_type==="code"&&e(l).embed_code?(_(),z("div",Ae,[s(m,{value:e(r)("view"),class:"mb-1"},null,8,["value"]),o("div",{innerHTML:e(l).embed_code,class:"border rounded p-4 bg-white dark:bg-slate-800"},null,8,Be)])):h("",!0),o("div",Ce,[s(m,{for:"related_videos",value:e(r)("relatedVideos"),class:"mb-1"},null,8,["value"]),s(e(w),{modelValue:e(l).related_videos,"onUpdate:modelValue":t[21]||(t[21]=a=>e(l).related_videos=a),options:g.related_videos,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"]),s(n,{class:"mt-2",message:e(l).errors.related_videos},null,8,["message"])]),o("div",ze,[o("div",De,[s(m,{for:"views",value:e(r)("views"),class:"mr-3"},null,8,["value"]),s(v,{id:"views",type:"number",modelValue:e(l).views,"onUpdate:modelValue":t[22]||(t[22]=a=>e(l).views=a),modelModifiers:{number:!0},autocomplete:"views"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.views},null,8,["message"])]),o("div",Le,[s(m,{for:"likes",value:e(r)("likes"),class:"mr-3"},null,8,["value"]),s(v,{id:"likes",type:"number",modelValue:e(l).likes,"onUpdate:modelValue":t[23]||(t[23]=a=>e(l).likes=a),modelModifiers:{number:!0},autocomplete:"likes"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.likes},null,8,["message"])])]),o("div",Ne,[o("div",He,[s(m,{for:"meta_title",value:e(r)("metaTitle")},null,8,["value"]),o("div",Ie,d(e(l).meta_title.length)+" / 160 "+d(e(r)("characters")),1)]),s(f,{id:"meta_title",type:"text",modelValue:e(l).meta_title,"onUpdate:modelValue":t[24]||(t[24]=a=>e(l).meta_title=a),maxlength:"160",autocomplete:"url"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.meta_title},null,8,["message"])]),o("div",Se,[o("div",Fe,[s(m,{for:"meta_keywords",value:e(r)("metaKeywords")},null,8,["value"]),o("div",Ee,d(e(l).meta_keywords.length)+" / 255 "+d(e(r)("characters")),1)]),s(f,{id:"meta_keywords",type:"text",modelValue:e(l).meta_keywords,"onUpdate:modelValue":t[25]||(t[25]=a=>e(l).meta_keywords=a),maxlength:"255",autocomplete:"url"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.meta_keywords},null,8,["message"])]),o("div",Oe,[o("div",qe,[s(m,{for:"meta_desc",value:e(r)("metaDescription")},null,8,["value"]),o("div",Pe,d(e(l).meta_desc.length)+" / 200 "+d(e(r)("characters")),1)]),s(j,{modelValue:e(l).meta_desc,"onUpdate:modelValue":t[26]||(t[26]=a=>e(l).meta_desc=a),maxlength:"200",class:"w-full"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(l).errors.meta_desc},null,8,["message"])]),o("div",Ge,[s(F,{onClick:U(A,["prevent"])},{icon:u(()=>[Je]),default:u(()=>[c(" "+d(e(r)("generateMetaTags")),1)]),_:1})]),s(K,{"onUpdate:images":t[27]||(t[27]=a=>e(l).images=a)}),o("div",Ke,[s(M,{href:i.route("admin.videos.index"),class:"mb-3"},{icon:u(()=>[Qe]),default:u(()=>[c(" "+d(e(r)("back")),1)]),_:1},8,["href"]),s(P,{class:N(["ms-4 mb-0",{"opacity-25":e(l).processing}]),disabled:e(l).processing},{icon:u(()=>[Re]),default:u(()=>[c(" "+d(e(r)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{vl as default};
