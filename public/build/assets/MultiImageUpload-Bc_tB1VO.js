import{u as y,l as w,C as g,m as p,o as u,i as I,f as s,n as k,k as d,F as U,v as V,I as c,aF as m}from"./vendor-KLnQVH-z.js";import{_ as C}from"./InputText-BNT2VvLh.js";const L={class:"multi-image-upload"},$={key:0,class:"mt-4 grid grid-cols-4 gap-4"},F=["src","alt"],A=["onUpdate:modelValue","placeholder"],B=["onUpdate:modelValue","placeholder"],N=["onUpdate:modelValue","placeholder"],M=["onClick","title"],z=s("svg",{class:"w-4 h-4 shrink-0 fill-current opacity-80",viewBox:"0 0 16 16"},[s("path",{d:"M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1l-1.4 1.4L8 9.4l-2.1 2.1-1.4-1.4L6.6 8 4.5 5.9l1.4-1.4L8 6.6l2.1-2.1 1.4 1.4L9.4 8l2.1 2.1z"})],-1),D=[z],T={__name:"MultiImageUpload",props:{existingImages:{type:Array,default:()=>[]}},emits:["update:images"],setup(f,{emit:v}){const{t:n}=y(),h=v,r=w([]),_=f;g(()=>_.existingImages,a=>{r.value=a.map(e=>({id:e.id,order:e.order||0,url:`/storage/article_images/${e.path}`,alt:e.alt||"",caption:e.caption||""}))},{immediate:!0});const b=a=>{Array.from(a.target.files).forEach(t=>{if(!r.value.some(l=>l.file&&l.file.name===t.name)){const l=new FileReader;l.onload=()=>{r.value.push({file:t,url:l.result,order:0,alt:"",caption:""}),i()},l.readAsDataURL(t)}})},i=()=>{const a=r.value.map(e=>{if(e.file)return{file:e.file,order:e.order,alt:e.alt,caption:e.caption};if(e.id)return{id:e.id,order:e.order,alt:e.alt,caption:e.caption}});h("update:images",a)},x=a=>{r.value.splice(a,1),i()};return(a,e)=>(u(),p("div",L,[I(C,{value:d(n)("uploadNewImages")},null,8,["value"]),s("input",{type:"file",multiple:"",onChange:b,accept:"image/*",class:"block w-full text-md text-gray-700 dark:text-gray-100 file:mr-4 file:py-0.5 file:px-2 file:border-0 file:text-sm file:font-semibold file:bg-violet-600 file:text-white hover:file:bg-violet-700"},null,32),r.value.length?(u(),p("div",$,[(u(!0),p(U,null,V(r.value,(t,l)=>(u(),p("div",{key:l,class:"relative border border-slate-500 rounded-sm py-0.5 px-2"},[s("img",{src:t.url,alt:d(n)("view"),class:"h-40 w-full object-cover"},null,8,F),c(s("input",{"onUpdate:modelValue":o=>t.order=o,onInput:e[0]||(e[0]=o=>i()),placeholder:d(n)("sort"),class:"w-full my-2 py-0.5 px-2 text-sm font-semibold border border-slate-500 rounded"},null,40,A),[[m,t.order]]),c(s("input",{"onUpdate:modelValue":o=>t.alt=o,onInput:e[1]||(e[1]=o=>i()),placeholder:d(n)("seoAltImage"),class:"w-full my-2 py-0.5 px-2 text-sm font-semibold border border-slate-500 rounded"},null,40,B),[[m,t.alt]]),c(s("input",{"onUpdate:modelValue":o=>t.caption=o,onInput:e[2]||(e[2]=o=>i()),placeholder:d(n)("seoTitleImage"),class:"w-full mb-2 py-0.5 px-2 text-sm font-semibold border border-slate-500 rounded"},null,40,N),[[m,t.caption]]),s("button",{onClick:o=>x(l),title:d(n)("delete"),class:"absolute top-0 right-0 bg-rose-500 hover:bg-rose-700 text-white rounded-sm p-1"},D,8,M)]))),128))])):k("",!0)]))}};export{T as _};
