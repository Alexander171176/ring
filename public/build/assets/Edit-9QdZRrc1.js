import{b as I,o as B,r as w,A as D,P as M,D as u,H as l,k as t,I as f,J as m,u as e,L as T,y as N}from"./vue-DrbZvlgE.js";import{a as z,u as A,T as S}from"./app-Bp8GUED0.js";import{A as q}from"./AdminLayout-m43ZpFmT.js";import{T as C}from"./TitlePage-CVAOVWeu.js";import{_ as v}from"./DefaultButton-B4OupGBJ.js";import{_ as c,a as p,b as E}from"./InputText-DBtoU87u.js";import{_ as d}from"./InputError-CDoDc20f.js";import{_ as L}from"./MetaDescTextarea-DjPUZo-s.js";import{_ as O,a as P,b as _}from"./InputNumber-D963n_HP.js";import"./ckeditor-Dh_eORW-.js";import{_ as H,a as b}from"./TinyEditor-CxBa4bIm.js";import{_ as F}from"./MultiImageUpload-Cl2NMbU3.js";import{_ as J}from"./MultiImageEdit-CHMwr59A.js";import{_ as K}from"./AvatarEditUpload-BxW9_JHA.js";import{_ as R}from"./StanceSelect-7fFT1-ot.js";import"./vendor-CGnu3J7H.js";import"./ScrollButtons-DwaEk0p5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-Cy7DQwuF.js";import"./LocaleSelectOption-DauWSBmB.js";import"./auth-image-XbvYdkSi.js";const G={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},Q={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},W={class:"sm:flex sm:justify-between sm:items-center mb-2"},X=l("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[l("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Y=l("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),Z={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ee={class:"flex flex-row items-center gap-2"},se={class:"flex flex-row items-center gap-2 w-auto"},te={class:"flex flex-row items-center gap-2"},le={class:"h-8 flex items-center"},ae={class:"mb-3 flex flex-col items-start"},oe={class:"flex justify-between w-full"},ie={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ne={class:"mb-3 flex flex-col items-start"},re={class:"flex justify-between w-full"},me=l("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),de={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ce={class:"mb-3 flex flex-col items-start"},ue={class:"flex justify-between w-full"},_e=l("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),fe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},he={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},pe={class:"mt-3 flex flex-col items-start w-full"},ge={class:"flex justify-start w-full"},xe={class:"flex flex-row items-center justify-end w-full"},we={class:"mb-3 flex flex-col items-end w-96"},ve={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},be={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ye={class:"flex flex-row items-center gap-2"},Ve={class:"h-8 flex items-center"},ke={class:"flex flex-row items-center gap-2"},Ue={class:"h-8 flex items-center"},je={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},$e={class:"flex flex-row items-center gap-2"},Ie={class:"h-8 flex items-center"},Be={class:"flex flex-row items-center gap-2"},De={class:"h-8 flex items-center"},Me={class:"flex flex-row items-center gap-2"},Te={class:"h-8 flex items-center"},Ne={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ze={class:"flex flex-row items-center gap-2"},Ae={class:"h-8 flex items-center"},Se={class:"flex flex-row items-center gap-2"},qe={class:"h-8 flex items-center"},Ce={class:"flex flex-row items-center gap-2"},Ee={class:"h-8 flex items-center"},Le={class:"flex flex-row items-center gap-2"},Oe={class:"h-8 flex items-center"},Pe={class:"mb-3 flex flex-col items-start"},He={class:"mb-3 flex flex-col items-start"},Fe={class:"flex justify-between w-full"},Je={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ke={class:"mb-3 flex flex-col items-start"},Re={class:"mt-4"},Ge={class:"mt-4"},Qe={class:"flex items-center justify-center mt-4"},We=l("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[l("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Xe=l("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[l("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),ws={__name:"Edit",props:{athlete:{type:Object,required:!0}},setup(y){const g=z(),{t:i}=A(),r=y,s=S({_method:"PUT",sort:r.athlete.sort??0,locale:r.athlete.locale??"",nickname:r.athlete.nickname??"",first_name:r.athlete.first_name??"",last_name:r.athlete.last_name??"",date_of_birth:r.athlete.date_of_birth??"",nationality:r.athlete.nationality??"",height_cm:r.athlete.height_cm??0,reach_cm:r.athlete.reach_cm??0,stance:r.athlete.stance??null,bio:r.athlete.bio??"",short:r.athlete.short??"",description:r.athlete.description??"",wins:r.athlete.wins??0,losses:r.athlete.losses??0,draws:r.athlete.draws??0,no_contests:r.athlete.no_contests??0,wins_by_ko:r.athlete.wins_by_ko??0,wins_by_submission:r.athlete.wins_by_submission??0,wins_by_decision:r.athlete.wins_by_decision??0,activity:!!r.athlete.activity,avatar:null,deletedImages:[]});I(()=>r.athlete.avatar?`/storage/${r.athlete.avatar}`:null);const V=n=>{if(!n)return"";const a=new Date(n);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]};B(()=>{s.date_of_birth&&(s.date_of_birth=V(s.date_of_birth))});const h=w((r.athlete.images||[]).filter(n=>n.url).map(n=>({id:n.id,url:n.webp_url||n.url,order:n.order||0,alt:n.alt||"",caption:n.caption||""}))),x=w([]),k=n=>{h.value=n},U=n=>{s.deletedImages.includes(n)||s.deletedImages.push(n),h.value=h.value.filter(a=>a.id!==n)},j=n=>{x.value=n},$=()=>{s.transform(n=>({...n,activity:n.activity?1:0,images:[...x.value.map(a=>({file:a.file,order:a.order,alt:a.alt,caption:a.caption})),...h.value.map(a=>({id:a.id,order:a.order,alt:a.alt,caption:a.caption}))],deletedImages:s.deletedImages})),s.post(route("admin.athletes.update",r.athlete.id),{forceFormData:!0,errorBag:"editAthlete",preserveScroll:!0,onSuccess:()=>{g.success("Спортсмен успешно обновлён!")},onError:n=>{console.error("❌ Ошибки валидации:",n);const a=n[Object.keys(n)[0]];g.error(a||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(n,a)=>(M(),D(q,{title:e(i)("editAthlete")},{header:u(()=>[t(C,null,{default:u(()=>[f(m(e(i)("editAthlete"))+" ID:"+m(r.athlete.id),1)]),_:1})]),default:u(()=>[l("div",G,[l("div",Q,[l("div",W,[t(v,{href:n.route("admin.athletes.index")},{icon:u(()=>[X]),default:u(()=>[f(" "+m(e(i)("back")),1)]),_:1},8,["href"]),Y]),l("form",{onSubmit:T($,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[l("div",Z,[l("div",ee,[t(O,{modelValue:e(s).activity,"onUpdate:modelValue":a[0]||(a[0]=o=>e(s).activity=o)},null,8,["modelValue"]),t(P,{for:"activity",text:e(i)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),l("div",se,[t(H,{modelValue:e(s).locale,"onUpdate:modelValue":a[1]||(a[1]=o=>e(s).locale=o),errorMessage:e(s).errors.locale},null,8,["modelValue","errorMessage"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.locale},null,8,["message"])]),l("div",te,[l("div",le,[t(c,{for:"sort",value:e(i)("sort"),class:"text-sm"},null,8,["value"])]),t(_,{id:"sort",type:"number",modelValue:e(s).sort,"onUpdate:modelValue":a[2]||(a[2]=o=>e(s).sort=o),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.sort},null,8,["message"])])]),l("div",ae,[l("div",oe,[t(c,{for:"nickname"},{default:u(()=>[f(m(e(i)("nickname")),1)]),_:1}),l("div",ie,m(e(s).nickname.length)+" / 100 "+m(e(i)("characters")),1)]),t(p,{id:"nickname",type:"text",modelValue:e(s).nickname,"onUpdate:modelValue":a[3]||(a[3]=o=>e(s).nickname=o),maxlength:"100",required:"",autocomplete:"nickname"},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.nickname},null,8,["message"])]),l("div",ne,[l("div",re,[t(c,{for:"first_name"},{default:u(()=>[me,f(" "+m(e(i)("name")),1)]),_:1}),l("div",de,m(e(s).first_name.length)+" / 100 "+m(e(i)("characters")),1)]),t(p,{id:"first_name",type:"text",modelValue:e(s).first_name,"onUpdate:modelValue":a[4]||(a[4]=o=>e(s).first_name=o),maxlength:"100",required:"",autocomplete:"first_name"},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.first_name},null,8,["message"])]),l("div",ce,[l("div",ue,[t(c,{for:"last_name"},{default:u(()=>[_e,f(" "+m(e(i)("lastName")),1)]),_:1}),l("div",fe,m(e(s).last_name.length)+" / 100 "+m(e(i)("characters")),1)]),t(p,{id:"last_name",type:"text",modelValue:e(s).last_name,"onUpdate:modelValue":a[5]||(a[5]=o=>e(s).last_name=o),maxlength:"100",required:"",autocomplete:"last_name"},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.last_name},null,8,["message"])]),l("div",he,[l("div",pe,[l("div",ge,[t(c,{for:"date_of_birth",value:e(i)("dateBirth"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),t(p,{id:"date_of_birth",type:"date",modelValue:e(s).date_of_birth,"onUpdate:modelValue":a[6]||(a[6]=o=>e(s).date_of_birth=o),autocomplete:"date_of_birth",class:"w-full max-w-56"},null,8,["modelValue"]),t(d,{class:"mt-1 sm:mt-0",message:e(s).errors.date_of_birth},null,8,["message"])])]),l("div",xe,[t(c,{for:"nationality",class:"mt-4 mr-2"},{default:u(()=>[f(m(e(i)("country")),1)]),_:1}),l("div",we,[l("div",ve,m(e(s).nationality.length)+" / 100 "+m(e(i)("characters")),1),t(p,{id:"nationality",type:"text",modelValue:e(s).nationality,"onUpdate:modelValue":a[7]||(a[7]=o=>e(s).nationality=o),maxlength:"100",required:"",autocomplete:"nationality"},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.nationality},null,8,["message"])])])]),l("div",be,[t(R,{modelValue:e(s).stance,"onUpdate:modelValue":a[8]||(a[8]=o=>e(s).stance=o),error:e(s).errors.stance,class:"mt-3"},null,8,["modelValue","error"]),l("div",ye,[l("div",Ve,[t(c,{for:"height_cm",value:e(i)("cmHeight"),class:"text-sm"},null,8,["value"])]),t(_,{id:"height_cm",type:"number",modelValue:e(s).height_cm,"onUpdate:modelValue":a[9]||(a[9]=o=>e(s).height_cm=o),autocomplete:"height_cm",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.height_cm},null,8,["message"])]),l("div",ke,[l("div",Ue,[t(c,{for:"reach_cm",value:e(i)("cmReach"),class:"text-sm"},null,8,["value"])]),t(_,{id:"reach_cm",type:"number",modelValue:e(s).reach_cm,"onUpdate:modelValue":a[10]||(a[10]=o=>e(s).reach_cm=o),autocomplete:"reach_cm",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.reach_cm},null,8,["message"])])]),l("div",je,[l("div",$e,[l("div",Ie,[t(c,{for:"losses",value:e(i)("losses"),class:"text-sm"},null,8,["value"])]),t(_,{id:"losses",type:"number",modelValue:e(s).losses,"onUpdate:modelValue":a[11]||(a[11]=o=>e(s).losses=o),autocomplete:"losses",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.losses},null,8,["message"])]),l("div",Be,[l("div",De,[t(c,{for:"draws",value:e(i)("draws"),class:"text-sm"},null,8,["value"])]),t(_,{id:"draws",type:"number",modelValue:e(s).draws,"onUpdate:modelValue":a[12]||(a[12]=o=>e(s).draws=o),autocomplete:"draws",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.draws},null,8,["message"])]),l("div",Me,[l("div",Te,[t(c,{for:"wins",value:e(i)("wins"),class:"text-sm"},null,8,["value"])]),t(_,{id:"wins",type:"number",modelValue:e(s).wins,"onUpdate:modelValue":a[13]||(a[13]=o=>e(s).wins=o),autocomplete:"wins",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.wins},null,8,["message"])])]),l("div",Ne,[l("div",ze,[l("div",Ae,[t(c,{for:"wins_by_ko",value:e(i)("winsByKo"),class:"text-sm"},null,8,["value"])]),t(_,{id:"wins_by_ko",type:"number",modelValue:e(s).wins_by_ko,"onUpdate:modelValue":a[14]||(a[14]=o=>e(s).wins_by_ko=o),autocomplete:"wins_by_ko",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.wins_by_ko},null,8,["message"])]),l("div",Se,[l("div",qe,[t(c,{for:"wins_by_submission",value:e(i)("winsBySubmission"),class:"text-sm"},null,8,["value"])]),t(_,{id:"wins_by_submission",type:"number",modelValue:e(s).wins_by_submission,"onUpdate:modelValue":a[15]||(a[15]=o=>e(s).wins_by_submission=o),autocomplete:"wins_by_submission",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.wins_by_submission},null,8,["message"])]),l("div",Ce,[l("div",Ee,[t(c,{for:"wins_by_decision",value:e(i)("winsByDecision"),class:"text-sm"},null,8,["value"])]),t(_,{id:"wins_by_decision",type:"number",modelValue:e(s).wins_by_decision,"onUpdate:modelValue":a[16]||(a[16]=o=>e(s).wins_by_decision=o),autocomplete:"wins_by_decision",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.wins_by_decision},null,8,["message"])])]),l("div",Le,[l("div",Oe,[t(c,{for:"no_contests",value:e(i)("noContests"),class:"text-sm"},null,8,["value"])]),t(_,{id:"no_contests",type:"number",modelValue:e(s).no_contests,"onUpdate:modelValue":a[17]||(a[17]=o=>e(s).no_contests=o),autocomplete:"no_contests",class:"w-full lg:w-28"},null,8,["modelValue"]),t(d,{class:"mt-2 lg:mt-0",message:e(s).errors.no_contests},null,8,["message"])]),l("div",Pe,[t(c,{for:"bio",value:e(i)("bio"),class:"w-full flex justify-center"},null,8,["value"]),t(b,{modelValue:e(s).bio,"onUpdate:modelValue":a[18]||(a[18]=o=>e(s).bio=o),height:500},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.bio},null,8,["message"])]),l("div",He,[l("div",Fe,[t(c,{for:"short",value:e(i)("shortDescription")},null,8,["value"]),l("div",Je,m(e(s).short.length)+" / 255 "+m(e(i)("characters")),1)]),t(L,{modelValue:e(s).short,"onUpdate:modelValue":a[19]||(a[19]=o=>e(s).short=o),class:"w-full"},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.short},null,8,["message"])]),l("div",Ke,[t(c,{for:"description",value:e(i)("description")},null,8,["value"]),t(b,{modelValue:e(s).description,"onUpdate:modelValue":a[20]||(a[20]=o=>e(s).description=o),height:500},null,8,["modelValue"]),t(d,{class:"mt-2",message:e(s).errors.description},null,8,["message"])]),t(K,{modelValue:e(s).avatar,"onUpdate:modelValue":a[21]||(a[21]=o=>e(s).avatar=o),"current-avatar":r.athlete.avatar,error:e(s).errors.avatar},null,8,["modelValue","current-avatar","error"]),l("div",Re,[t(J,{images:h.value,"onUpdate:images":k,onDeleteImage:U},null,8,["images"])]),l("div",Ge,[t(F,{"onUpdate:images":j})]),l("div",Qe,[t(v,{href:n.route("admin.athletes.index"),class:"mb-3"},{icon:u(()=>[We]),default:u(()=>[f(" "+m(e(i)("back")),1)]),_:1},8,["href"]),t(E,{class:N(["ms-4",{"opacity-25":e(s).processing}]),disabled:e(s).processing},{icon:u(()=>[Xe]),default:u(()=>[f(" "+m(e(i)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{ws as default};
