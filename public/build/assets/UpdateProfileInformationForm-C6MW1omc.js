import{r as v,A as S,P as p,D as l,k as s,u as e,I as i,J as r,y as F,x as I,G as _,H as n,U as h,V as g,z as j,L as k}from"./vue-DrbZvlgE.js";import{T as E,u as L,i as z,F as T}from"./app-Bp8GUED0.js";import{_ as q}from"./ActionMessage-BPU_IPhv.js";import{_ as A}from"./FormSection-DcKmm5ZP.js";import{a as y,_ as x}from"./TextInput-CTDGYsrk.js";import{_ as b}from"./InputLabel-2ZtwOBR0.js";import{_ as R}from"./PrimaryButton-Bhj0kBWG.js";import{_ as $}from"./SecondaryButton-yS4FVESO.js";import"./vendor-CGnu3J7H.js";import"./SectionTitle-eGvQqSRO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0,class:"col-span-6 sm:col-span-4"},H={class:"mt-2"},J=["src","alt"],M={class:"mt-2"},O={class:"col-span-6 sm:col-span-4"},K={class:"col-span-6 sm:col-span-4"},Q={key:0},W={class:"text-sm mt-2"},ie={__name:"UpdateProfileInformationForm",props:{user:Object},setup(c){const w=c,o=E({_method:"PUT",name:w.user.name,email:w.user.email,photo:null}),P=v(null),d=v(null),u=v(null),C=()=>{u.value&&(o.photo=u.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})},N=()=>{P.value=!0},U=()=>{u.value.click()},B=()=>{const a=u.value.files[0];if(!a)return;const m=new FileReader;m.onload=f=>{d.value=f.target.result},m.readAsDataURL(a)},D=()=>{T.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{d.value=null,V()}})},V=()=>{var a;(a=u.value)!=null&&a.value&&(u.value.value=null)},{t}=L();return(a,m)=>(p(),S(A,{onSubmitted:C},{title:l(()=>[i(r(e(t)("profileInformation")),1)]),description:l(()=>[i(r(e(t)("profileInformationDescription")),1)]),form:l(()=>[a.$page.props.jetstream.managesProfilePhotos?(p(),I("div",G,[n("input",{id:"photo",ref_key:"photoInput",ref:u,type:"file",class:"hidden",onChange:B},null,544),s(b,{for:"photo",value:e(t)("photo")},null,8,["value"]),h(n("div",H,[n("img",{src:c.user.profile_photo_url,alt:c.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,J)],512),[[g,!d.value]]),h(n("div",M,[n("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:j("background-image: url('"+d.value+"');")},null,4)],512),[[g,d.value]]),s($,{class:"mt-2 me-2 lowercase",type:"button",onClick:k(U,["prevent"])},{default:l(()=>[i(r(e(t)("selectNewPhoto")),1)]),_:1}),c.user.profile_photo_path?(p(),S($,{key:0,type:"button",class:"mt-2 lowercase",onClick:k(D,["prevent"])},{default:l(()=>[i(r(e(t)("deletePhoto")),1)]),_:1})):_("",!0),s(y,{message:e(o).errors.photo,class:"mt-2"},null,8,["message"])])):_("",!0),n("div",O,[s(b,{for:"name",value:e(t)("name")},null,8,["value"]),s(x,{id:"name",modelValue:e(o).name,"onUpdate:modelValue":m[0]||(m[0]=f=>e(o).name=f),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),s(y,{message:e(o).errors.name,class:"mt-2"},null,8,["message"])]),n("div",K,[s(b,{for:"email",value:e(t)("email")},null,8,["value"]),s(x,{id:"email",modelValue:e(o).email,"onUpdate:modelValue":m[1]||(m[1]=f=>e(o).email=f),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),s(y,{message:e(o).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&c.user.email_verified_at===null?(p(),I("div",Q,[n("p",W,[i(r(e(t)("emailNotVerified"))+" ",1),s(e(z),{href:a.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k(N,["prevent"])},{default:l(()=>[i(r(e(t)("resendVerificationEmail")),1)]),_:1},8,["href"])]),h(n("div",{class:"mt-2 font-medium text-sm text-green-600"},r(e(t)("verificationLinkSent")),513),[[g,P.value]])])):_("",!0)])]),actions:l(()=>[s(q,{on:e(o).recentlySuccessful,class:"me-3"},{default:l(()=>[i(r(e(t)("saved")),1)]),_:1},8,["on"]),s(R,{class:F({"opacity-25":e(o).processing}),disabled:e(o).processing},{default:l(()=>[i(r(e(t)("save")),1)]),_:1},8,["class","disabled"])]),_:1}))}};export{ie as default};
