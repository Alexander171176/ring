import{m as y,o as x,f as s,n as N,t as m,F as M,v as C,y as D,u as q,T as z,z as A,l as k,e as E,w as d,i as o,p as _,k as e,A as F,q as L}from"./vendor-KLnQVH-z.js";import{A as O}from"./AdminLayout-B5bZFClc.js";import{T as P}from"./TitlePage-Dn5_Db7V.js";import{_ as U}from"./DefaultButton-mNfyXOKI.js";import{_ as c,a as g,b as K}from"./InputText-BNT2VvLh.js";import{_ as u}from"./InputError-5M0RC1-a.js";import{_ as R}from"./MetaDescTextarea-CmFtzWFr.js";import{_ as $,a as j,b as w}from"./InputNumber-BojX-z2D.js";import{_ as W,a as G}from"./TinyEditor-G-2AJZ5r.js";import{_ as H}from"./MultiImageUpload-Bc_tB1VO.js";import{_ as J}from"./MultiImageEdit-DTEGt07j.js";import{_ as Q}from"./StatusSelect-BQBu8I-I.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-p73LerAr.js";import"./ScrollButtons-BQ3VHXoa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-GNuCPEap.js";import"./LocaleSelectOption-DmkMWodN.js";import"./app-1bgHo_eX.js";import"./auth-image-XbvYdkSi.js";const X={class:"w-full"},Y={class:"block text-sm font-medium mb-1"},Z=["value"],ee={value:""},te=["value"],se={key:0,class:"text-red-500 text-xs mt-1"},b={__name:"SelectAthlete",props:{modelValue:[Number,String],error:String,label:String,options:{type:Array,required:!0}},emits:["update:modelValue"],setup(f,{emit:v}){const r=v;return(n,t)=>(x(),y("div",X,[s("label",Y,m(f.label),1),s("select",{class:"form-select w-full dark:bg-slate-700 dark:text-white",value:f.modelValue,onChange:t[0]||(t[0]=h=>r("update:modelValue",+h.target.value))},[s("option",ee,m(n.$t("select")),1),(x(!0),y(M,null,C(f.options,h=>(x(),y("option",{key:h.id,value:h.id},m(h.nickname),9,te))),128))],40,Z),f.error?(x(),y("p",se,m(f.error),1)):N("",!0)]))}},le={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},oe={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},ae={class:"sm:flex sm:justify-between sm:items-center mb-2"},re=s("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[s("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),ie=s("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),ne={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},me={class:"flex flex-row items-center gap-2"},de={class:"flex flex-row items-center gap-2 w-auto"},ue={class:"flex flex-row items-center gap-2"},ce={class:"h-8 flex items-center"},_e={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},fe={class:"flex flex-row items-center gap-2 w-full"},he={class:"flex flex-row items-center justify-end w-full gap-2"},ge={class:"flex justify-start w-full"},pe={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},xe={class:"flex flex-row items-center justify-end w-full"},ve={class:"mb-3 flex flex-col items-end w-96"},ye={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},we={class:"flex flex-row items-center justify-end w-full"},be={class:"h-8 flex items-center"},Ve={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ke={class:"flex flex-row items-center justify-end w-full"},Ue={class:"mb-3 flex flex-col items-start w-96"},$e={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},je={class:"flex flex-row items-center justify-end w-full"},Ie={class:"mb-3 flex flex-col items-start w-96"},Te={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Be={class:"mb-4 grid grid-cols-1 md:grid-cols-3 gap-4"},Se={class:"mb-3 flex flex-col items-start"},Ne={class:"flex justify-between w-full"},Me=s("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),Ce={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},De={class:"mb-3 flex flex-col items-start"},qe={class:"flex justify-between w-full"},ze={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ae={class:"mb-3 flex flex-col items-start"},Ee={class:"mb-3 flex flex-row items-center justify-start gap-2"},Fe={class:"h-8 flex items-center"},Le={class:"flex flex-row items-center gap-2"},Oe={class:"h-8 flex items-center"},Pe={class:"flex flex-row items-center gap-2"},Ke={class:"h-8 flex items-center"},Re={class:"mb-3 flex flex-col items-end w-96"},We={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ge={class:"mt-4"},He={class:"mt-4"},Je={class:"flex items-center justify-center mt-4"},Qe=s("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[s("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Xe=s("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[s("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),xt={__name:"Edit",props:{tournament:{type:Object,required:!0},athletes:{type:Array,required:!0}},setup(f){const v=D(),{t:r}=q(),n=f,t=z({_method:"PUT",sort:n.tournament.sort??0,activity:!!n.tournament.activity,locale:n.tournament.locale??"",name:n.tournament.name??"",short:n.tournament.short??"",description:n.tournament.description??"",tournament_date_time:n.tournament.tournament_date_time??"",status:n.tournament.status??null,venue:n.tournament.venue??"",city:n.tournament.city??"",country:n.tournament.country??"",weight_class_name:n.tournament.weight_class_name??"",rounds_scheduled:n.tournament.rounds_scheduled??0,is_title_fight:!!n.tournament.is_title_fight,fighter_red_id:n.tournament.fighter_red_id,fighter_blue_id:n.tournament.fighter_blue_id,winner_id:n.tournament.winner_id,method_of_victory:n.tournament.method_of_victory??"",round_of_finish:n.tournament.round_of_finish??0,time_of_finish:n.tournament.time_of_finish??"",deletedImages:[]}),h=i=>{if(!i)return"";const l=new Date(i);return isNaN(l.getTime())?"":l.toISOString().split("T")[0]};A(()=>{t.tournament_date_time&&(t.tournament_date_time=h(t.tournament_date_time))});const p=k((n.tournament.images||[]).filter(i=>i.url).map(i=>({id:i.id,url:i.webp_url||i.url,order:i.order||0,alt:i.alt||"",caption:i.caption||""}))),V=k([]),I=i=>{p.value=i},T=i=>{t.deletedImages.includes(i)||t.deletedImages.push(i),p.value=p.value.filter(l=>l.id!==i)},B=i=>{V.value=i},S=()=>{t.transform(i=>({...i,activity:i.activity?1:0,is_title_fight:i.is_title_fight?1:0,images:[...V.value.map(l=>({file:l.file,order:l.order,alt:l.alt,caption:l.caption})),...p.value.map(l=>({id:l.id,order:l.order,alt:l.alt,caption:l.caption}))],deletedImages:t.deletedImages})),t.post(route("admin.tournaments.update",n.tournament.id),{forceFormData:!0,errorBag:"editTournament",preserveScroll:!0,onSuccess:()=>{v.success("турнир успешно обновлён!")},onError:i=>{console.error("❌ Ошибки валидации:",i);const l=i[Object.keys(i)[0]];v.error(l||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(i,l)=>(x(),E(O,{title:e(r)("editTournament")},{header:d(()=>[o(P,null,{default:d(()=>[_(m(e(r)("editTournament"))+" ID:"+m(n.tournament.id),1)]),_:1})]),default:d(()=>[s("div",le,[s("div",oe,[s("div",ae,[o(U,{href:i.route("admin.tournaments.index")},{icon:d(()=>[re]),default:d(()=>[_(" "+m(e(r)("back")),1)]),_:1},8,["href"]),ie]),s("form",{onSubmit:F(S,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[s("div",ne,[s("div",me,[o($,{modelValue:e(t).activity,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).activity=a)},null,8,["modelValue"]),o(j,{for:"activity",text:e(r)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),s("div",de,[o(W,{modelValue:e(t).locale,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).locale=a),errorMessage:e(t).errors.locale},null,8,["modelValue","errorMessage"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.locale},null,8,["message"])]),s("div",ue,[s("div",ce,[o(c,{for:"sort",value:e(r)("sort"),class:"text-sm"},null,8,["value"])]),o(w,{id:"sort",type:"number",modelValue:e(t).sort,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).sort=a),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.sort},null,8,["message"])])]),s("div",_e,[s("div",fe,[o($,{modelValue:e(t).is_title_fight,"onUpdate:modelValue":l[3]||(l[3]=a=>e(t).is_title_fight=a)},null,8,["modelValue"]),o(j,{for:"is_title_fight",text:e(r)("isTitleFight"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),s("div",he,[s("div",ge,[o(c,{for:"tournament_date_time",value:e(r)("date"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),o(g,{id:"tournament_date_time",type:"date",modelValue:e(t).tournament_date_time,"onUpdate:modelValue":l[4]||(l[4]=a=>e(t).tournament_date_time=a),autocomplete:"tournament_date_time",class:"w-full max-w-56"},null,8,["modelValue"]),o(u,{class:"mt-1 sm:mt-0",message:e(t).errors.tournament_date_time},null,8,["message"])])]),o(Q,{modelValue:e(t).status,"onUpdate:modelValue":l[5]||(l[5]=a=>e(t).status=a),error:e(t).errors.status},null,8,["modelValue","error"])]),s("div",pe,[s("div",xe,[o(c,{for:"weight_class_name",class:"mt-4 mr-2"},{default:d(()=>[_(m(e(r)("weightClassName")),1)]),_:1}),s("div",ve,[s("div",ye,m(e(t).weight_class_name.length)+" / 100 "+m(e(r)("characters")),1),o(g,{id:"weight_class_name",type:"text",modelValue:e(t).weight_class_name,"onUpdate:modelValue":l[6]||(l[6]=a=>e(t).weight_class_name=a),maxlength:"100",autocomplete:"weight_class_name",placeholder:e(r)("placeholderWeightClassName")},null,8,["modelValue","placeholder"]),o(u,{class:"mt-2",message:e(t).errors.weight_class_name},null,8,["message"])])]),s("div",we,[s("div",be,[o(c,{for:"rounds_scheduled",value:e(r)("roundsScheduled"),class:"mr-2 w-auto"},null,8,["value"])]),o(w,{id:"rounds_scheduled",type:"number",modelValue:e(t).rounds_scheduled,"onUpdate:modelValue":l[7]||(l[7]=a=>e(t).rounds_scheduled=a),autocomplete:"rounds_scheduled",class:"max-w-20"},null,8,["modelValue"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.rounds_scheduled},null,8,["message"])])]),s("div",Ve,[s("div",ke,[o(c,{for:"country",class:"mt-4 mr-2"},{default:d(()=>[_(m(e(r)("country")),1)]),_:1}),s("div",Ue,[s("div",$e,m(e(t).country.length)+" / 100 "+m(e(r)("characters")),1),o(g,{class:"max-w-80",id:"country",type:"text",modelValue:e(t).country,"onUpdate:modelValue":l[8]||(l[8]=a=>e(t).country=a),maxlength:"100",required:"",autocomplete:"country"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.country},null,8,["message"])])]),s("div",je,[o(c,{for:"country",class:"mt-4 mr-2"},{default:d(()=>[_(m(e(r)("city")),1)]),_:1}),s("div",Ie,[s("div",Te,m(e(t).city.length)+" / 100 "+m(e(r)("characters")),1),o(g,{class:"max-w-80",id:"city",type:"text",modelValue:e(t).city,"onUpdate:modelValue":l[9]||(l[9]=a=>e(t).city=a),maxlength:"100",required:"",autocomplete:"city"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.city},null,8,["message"])])])]),s("div",Be,[o(b,{modelValue:e(t).fighter_red_id,"onUpdate:modelValue":l[10]||(l[10]=a=>e(t).fighter_red_id=a),options:n.athletes,label:e(r)("fighterRed"),error:e(t).errors.fighter_red_id},null,8,["modelValue","options","label","error"]),o(b,{modelValue:e(t).fighter_blue_id,"onUpdate:modelValue":l[11]||(l[11]=a=>e(t).fighter_blue_id=a),options:n.athletes,label:e(r)("fighterBlue"),error:e(t).errors.fighter_blue_id},null,8,["modelValue","options","label","error"]),o(b,{modelValue:e(t).winner_id,"onUpdate:modelValue":l[12]||(l[12]=a=>e(t).winner_id=a),options:n.athletes,label:e(r)("winner"),error:e(t).errors.winner_id},null,8,["modelValue","options","label","error"])]),s("div",Se,[s("div",Ne,[o(c,{for:"name"},{default:d(()=>[Me,_(" "+m(e(r)("title")),1)]),_:1}),s("div",Ce,m(e(t).name.length)+" / 255 "+m(e(r)("characters")),1)]),o(g,{id:"name",type:"text",modelValue:e(t).name,"onUpdate:modelValue":l[13]||(l[13]=a=>e(t).name=a),maxlength:"255",required:"",autocomplete:"name"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.name},null,8,["message"])]),s("div",De,[s("div",qe,[o(c,{for:"short",value:e(r)("shortDescription")},null,8,["value"]),s("div",ze,m(e(t).short.length)+" / 255 "+m(e(r)("characters")),1)]),o(R,{modelValue:e(t).short,"onUpdate:modelValue":l[14]||(l[14]=a=>e(t).short=a),class:"w-full"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.short},null,8,["message"])]),s("div",Ae,[o(c,{for:"description",value:e(r)("description")},null,8,["value"]),o(G,{modelValue:e(t).description,"onUpdate:modelValue":l[15]||(l[15]=a=>e(t).description=a),height:500},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.description},null,8,["message"])]),s("div",Ee,[s("div",Fe,[o(c,{for:"time_of_finish",class:"mr-2 w-auto"},{default:d(()=>[_(m(e(r)("timeFinish")),1)]),_:1})]),o(g,{class:"max-w-20",id:"time_of_finish",type:"text",modelValue:e(t).time_of_finish,"onUpdate:modelValue":l[16]||(l[16]=a=>e(t).time_of_finish=a),maxlength:"8",autocomplete:"time_of_finish",placeholder:"02:35"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.time_of_finish},null,8,["message"])]),s("div",Le,[s("div",Oe,[o(c,{for:"round_of_finish",value:e(r)("roundFinish"),class:"mr-2 w-auto"},null,8,["value"])]),o(w,{id:"round_of_finish",type:"number",modelValue:e(t).round_of_finish,"onUpdate:modelValue":l[17]||(l[17]=a=>e(t).round_of_finish=a),maxlength:"2",autocomplete:"round_of_finish",class:"max-w-20"},null,8,["modelValue"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.round_of_finish},null,8,["message"])]),s("div",Pe,[s("div",Ke,[o(c,{for:"method_of_victory",class:"mr-2 mt-4 w-auto"},{default:d(()=>[_(m(e(r)("methodVictory")),1)]),_:1})]),s("div",Re,[s("div",We,m(e(t).method_of_victory.length)+" / 100 "+m(e(r)("characters")),1),o(g,{id:"method_of_victory",type:"text",modelValue:e(t).method_of_victory,"onUpdate:modelValue":l[18]||(l[18]=a=>e(t).method_of_victory=a),maxlength:"100",autocomplete:"method_of_victory",placeholder:"KO, Submission"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.method_of_victory},null,8,["message"])])]),s("div",Ge,[o(J,{images:p.value,"onUpdate:images":I,onDeleteImage:T},null,8,["images"])]),s("div",He,[o(H,{"onUpdate:images":B})]),s("div",Je,[o(U,{href:i.route("admin.tournaments.index"),class:"mb-3"},{icon:d(()=>[Qe]),default:d(()=>[_(" "+m(e(r)("back")),1)]),_:1},8,["href"]),o(K,{class:L(["ms-4",{"opacity-25":e(t).processing}]),disabled:e(t).processing},{icon:d(()=>[Xe]),default:d(()=>[_(" "+m(e(r)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{xt as default};
