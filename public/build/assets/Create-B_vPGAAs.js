import{u as $,y as j,T as M,e as T,o as B,w as c,f as s,i as l,p as f,t as m,k as e,A as v,B as z,q as C}from"./vendor-RLSRVg0u.js";import{_ as S,t as A}from"./MetatagsButton-DcIijoUM.js";import{A as F}from"./AdminLayout-BKlaFo32.js";import{T as I}from"./TitlePage-FZyLO7ZL.js";import{_ as h}from"./DefaultButton-nL57tpOx.js";import{_ as n,a as p,b as L}from"./InputText-5Caei78W.js";import{_ as q,a as D,b as H}from"./InputNumber-Bsw9q1AF.js";import{_ as N}from"./DescriptionTextarea-Bl9wDcAU.js";import{_ as b}from"./MetaDescTextarea-B3siJ_Tv.js";import{_ as d}from"./InputError-BqCCjfzi.js";import{_ as O,a as R}from"./TinyEditor-CmS03TaH.js";/* empty css                                                                     */import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-xl9ghVBF.js";import"./ScrollButtons-Bf8O8t11.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationMark-xXghvFch.js";import"./ResponsiveNavLink-BMppKKTO.js";import"./LocaleSelectOption-B-81EClK.js";import"./app-DnDP20Mi.js";import"./auth-image-XbvYdkSi.js";const E={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},K={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},P={class:"sm:flex sm:justify-between sm:items-center mb-2"},G=s("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[s("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),J=s("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),Q={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},W={class:"flex flex-row items-center gap-2"},X={class:"flex flex-row items-center gap-2 w-auto"},Y={class:"flex flex-row items-center gap-2"},Z={class:"h-8 flex items-center"},ee={class:"mb-3 flex flex-col items-start"},te={class:"mb-3 flex flex-col items-start"},se={class:"mb-3 flex flex-col items-start"},le=s("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),oe={class:"mb-3 flex flex-col items-start"},ae=s("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),re={class:"mb-3 flex flex-col items-start"},ie={class:"flex justify-between w-full"},me={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ce={class:"mb-3 flex flex-col items-start"},ne={class:"mb-3 flex flex-col items-start"},de={class:"flex justify-between w-full"},ue={class:"text-xs text-gray-900 dark:text-gray-400 mt-1"},fe={class:"mb-3 flex flex-col items-start"},_e={class:"flex justify-between w-full"},pe={class:"text-xs text-gray-900 dark:text-gray-400 mt-1"},xe={class:"mb-3 flex flex-col items-start"},ge={class:"flex justify-between w-full"},ve={class:"text-xs text-gray-900 dark:text-gray-400 mt-1"},he={class:"flex justify-end mt-4"},be=s("svg",{class:"w-4 h-4 fill-current text-slate-600 shrink-0 mr-2",viewBox:"0 0 16 16"},[s("path",{d:"M13 7h2v6a1 1 0 01-1 1H4v2l-4-3 4-3v2h9V7zM3 9H1V3a1 1 0 011-1h10V0l4 3-4 3V4H3v5z"})],-1),ye={class:"flex items-center justify-center mt-4"},we=s("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[s("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Ve=s("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[s("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),Ke={__name:"Create",props:{sections:Array},setup(y){const{t:r}=$(),g=j(),t=M({sort:"0",icon:"",locale:"",title:"",url:"",short:"",description:"",meta_title:"",meta_keywords:"",meta_desc:"",activity:!1,sections:[]}),w=()=>{t.title&&(t.url=A(t.title.toLowerCase()))},x=(i,o,a=!1)=>{if(!i)return"";if(i.length<=o)return i;const u=i.lastIndexOf(" ",o),_=u===-1?i.substr(0,o):i.substr(0,u);return a?`${_}...`:_},V=()=>{if(t.title&&!t.meta_title&&(t.meta_title=x(t.title,160)),!t.meta_keywords&&t.short){let i=t.short.replace(/(<([^>]+)>)/gi,"");i=i.replace(/[.,!?;:()\[\]{}"'«»]/g,"");const a=i.split(/\s+/).filter(u=>u&&u.length>=3).map(u=>u.toLowerCase()).filter((u,_,U)=>U.indexOf(u)===_).join(", ");t.meta_keywords=x(a,255)}if(t.short&&!t.meta_desc){const i=t.short.replace(/(<([^>]+)>)/gi,"");t.meta_desc=x(i,200,!0)}},k=()=>{t.transform(i=>({...i,activity:i.activity?1:0})),t.post(route("admin.rubrics.store"),{errorBag:"createRubric",preserveScroll:!0,onSuccess:()=>{g.success("Рубрика успешно создана!")},onError:i=>{console.error("Не удалось отправить форму:",i);const o=i[Object.keys(i)[0]];g.error(o||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(i,o)=>(B(),T(F,{title:e(r)("createRubric")},{header:c(()=>[l(I,null,{default:c(()=>[f(m(e(r)("createRubric")),1)]),_:1})]),default:c(()=>[s("div",E,[s("div",K,[s("div",P,[l(h,{href:i.route("admin.rubrics.index")},{icon:c(()=>[G]),default:c(()=>[f(" "+m(e(r)("back")),1)]),_:1},8,["href"]),J]),s("form",{onSubmit:v(k,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[s("div",Q,[s("div",W,[l(q,{modelValue:e(t).activity,"onUpdate:modelValue":o[0]||(o[0]=a=>e(t).activity=a)},null,8,["modelValue"]),l(D,{for:"activity",text:e(r)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),s("div",X,[l(O,{modelValue:e(t).locale,"onUpdate:modelValue":o[1]||(o[1]=a=>e(t).locale=a),errorMessage:e(t).errors.locale},null,8,["modelValue","errorMessage"]),l(d,{class:"mt-2 lg:mt-0",message:e(t).errors.locale},null,8,["message"])]),s("div",Y,[s("div",Z,[l(n,{for:"sort",value:e(r)("sort"),class:"text-sm"},null,8,["value"])]),l(H,{id:"sort",type:"number",modelValue:e(t).sort,"onUpdate:modelValue":o[2]||(o[2]=a=>e(t).sort=a),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),l(d,{class:"mt-2 lg:mt-0",message:e(t).errors.sort},null,8,["message"])])]),s("div",ee,[l(n,{for:"sections",value:e(r)("sections"),class:"mb-1"},null,8,["value"]),l(e(z),{modelValue:e(t).sections,"onUpdate:modelValue":o[3]||(o[3]=a=>e(t).sections=a),options:y.sections,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),s("div",te,[l(n,{for:"icon",value:e(r)("svg")},null,8,["value"]),l(N,{modelValue:e(t).icon,"onUpdate:modelValue":o[4]||(o[4]=a=>e(t).icon=a),class:"w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.icon},null,8,["message"])]),s("div",se,[l(n,{for:"title"},{default:c(()=>[le,f(" "+m(e(r)("rubricTitle")),1)]),_:1}),l(p,{id:"title",type:"text",modelValue:e(t).title,"onUpdate:modelValue":o[5]||(o[5]=a=>e(t).title=a),required:"",autocomplete:"title"},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.title},null,8,["message"])]),s("div",oe,[l(n,{for:"url"},{default:c(()=>[ae,f(" "+m(e(r)("rubricUrl")),1)]),_:1}),l(p,{id:"url",type:"text",modelValue:e(t).url,"onUpdate:modelValue":o[6]||(o[6]=a=>e(t).url=a),required:"",autocomplete:"url",onFocus:w},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.url},null,8,["message"])]),s("div",re,[s("div",ie,[l(n,{for:"short",value:e(r)("shortDescription")},null,8,["value"]),s("div",me,m(e(t).short.length)+" / 255 "+m(e(r)("characters")),1)]),l(b,{modelValue:e(t).short,"onUpdate:modelValue":o[7]||(o[7]=a=>e(t).short=a),class:"w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.short},null,8,["message"])]),s("div",ce,[l(n,{for:"description",value:e(r)("description")},null,8,["value"]),l(R,{modelValue:e(t).description,"onUpdate:modelValue":o[8]||(o[8]=a=>e(t).description=a),height:500},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.description},null,8,["message"])]),s("div",ne,[s("div",de,[l(n,{for:"meta_title",value:e(r)("metaTitle")},null,8,["value"]),s("div",ue,m(e(t).meta_title.length)+" / 255 "+m(e(r)("characters")),1)]),l(p,{id:"meta_title",type:"text",modelValue:e(t).meta_title,"onUpdate:modelValue":o[9]||(o[9]=a=>e(t).meta_title=a),maxlength:"255",autocomplete:"url"},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.meta_title},null,8,["message"])]),s("div",fe,[s("div",_e,[l(n,{for:"meta_keywords",value:e(r)("metaKeywords")},null,8,["value"]),s("div",pe,m(e(t).meta_keywords.length)+" / 255 "+m(e(r)("characters")),1)]),l(p,{id:"meta_keywords",type:"text",modelValue:e(t).meta_keywords,"onUpdate:modelValue":o[10]||(o[10]=a=>e(t).meta_keywords=a),maxlength:"255",autocomplete:"url"},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.meta_keywords},null,8,["message"])]),s("div",xe,[s("div",ge,[l(n,{for:"meta_desc",value:e(r)("metaDescription")},null,8,["value"]),s("div",ve,m(e(t).meta_desc.length)+" / 255 "+m(e(r)("characters")),1)]),l(b,{modelValue:e(t).meta_desc,"onUpdate:modelValue":o[11]||(o[11]=a=>e(t).meta_desc=a),class:"w-full"},null,8,["modelValue"]),l(d,{class:"mt-2",message:e(t).errors.meta_desc},null,8,["message"])]),s("div",he,[l(S,{onClick:v(V,["prevent"])},{icon:c(()=>[be]),default:c(()=>[f(" "+m(e(r)("generateMetaTags")),1)]),_:1})]),s("div",ye,[l(h,{href:i.route("admin.rubrics.index"),class:"mb-3"},{icon:c(()=>[we]),default:c(()=>[f(" "+m(e(r)("back")),1)]),_:1},8,["href"]),l(L,{class:C(["ms-4 mb-0",{"opacity-25":e(t).processing}]),disabled:e(t).processing},{icon:c(()=>[Ve]),default:c(()=>[f(" "+m(e(r)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{Ke as default};
