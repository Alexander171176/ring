import{u as L,Q as B,i as v,Z as N}from"./app-Bp8GUED0.js";import{_ as P}from"./DefaultLayout-CwrzgkhG.js";import{a as S}from"./vendor-CGnu3J7H.js";import{r as $,x as n,P as o,H as s,u as e,J as i,b as y,A as b,D as p,k as _,Z as C,F as k,N as w,y as A,o as T,j as D,G as m,I}from"./vue-DrbZvlgE.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-Cy7DQwuF.js";import"./LogoutButton-CgDShVbY.js";import"./LocaleSelectOption-DauWSBmB.js";const E={itemprop:"interactionStatistic",itemscope:"",itemtype:"http://schema.org/InteractionCounter"},F=s("meta",{itemprop:"interactionType",content:"http://schema.org/LikeAction"},null,-1),H=["content"],z=["title"],O=s("svg",{class:"w-4 h-4 fill-current text-rose-400 hover:text-yellow-500 active:text-fuchsia-500 transition-all duration-200 transform",viewBox:"0 0 512 512"},[s("path",{d:"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"})],-1),R={class:"ml-1 font-semibold text-sm dark:text-slate-100"},j={__name:"LikeButton",setup(h){const{t:u}=L(),{article:t}=B().props,r=$(t.likes),a=()=>{S.post(route("articles.like",t.id)).then(d=>{d.data.success&&(r.value=d.data.likes)}).catch(d=>{console.error("Ошибка лайка:",d)})};return(d,c)=>(o(),n("div",E,[F,s("meta",{itemprop:"userInteractionCount",content:e(t).likes},null,8,H),s("div",{onClick:a,title:e(u)("like"),class:"w-12 px-1 py-0.5 flex flex-row items-center cursor-pointer rounded bg-slate-200 dark:bg-slate-700 hover:bg-opacity-75 active:bg-opacity-75 border-2 border-slate-400 transition-all duration-200 transform hover:scale-105 active:scale-95"},[O,s("span",R,i(e(t).likes),1)],8,z)]))}},U={class:"relative w-full h-full"},Z=["src","alt"],q=["src","alt"],G={class:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2"},J=["onClick"],Q={__name:"ArticleImageMain",props:{images:{type:Array,required:!0},link:{type:String,default:""}},setup(h){const u=h,t=$(0),r=y(()=>u.images.length),a=y(()=>u.images[t.value]);return(d,c)=>(o(),n("div",U,[h.link?(o(),b(e(v),{key:0,href:h.link,class:"block w-full h-full"},{default:p(()=>[_(C,{name:"fade",mode:"out-in"},{default:p(()=>[(o(),n("img",{key:a.value.id,src:a.value.webp_url||a.value.url,alt:a.value.alt,class:"w-full h-full object-cover"},null,8,Z))]),_:1})]),_:1},8,["href"])):(o(),b(C,{key:1,name:"fade",mode:"out-in"},{default:p(()=>[(o(),n("img",{key:a.value.id,src:a.value.webp_url||a.value.url,alt:a.value.alt,class:"w-full h-full object-cover"},null,8,q))]),_:1})),s("button",{onClick:c[0]||(c[0]=g=>t.value=(t.value-1+r.value)%r.value),class:"absolute top-1/2 left-0 transform -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white px-2 py-1 rounded-r focus:outline-none","aria-label":"Previous"}," ❮ "),s("button",{onClick:c[1]||(c[1]=g=>t.value=(t.value+1)%r.value),class:"absolute top-1/2 right-0 transform -translate-y-1/2 bg-gray-700 bg-opacity-75 text-white px-2 py-1 rounded-l focus:outline-none","aria-label":"Next"}," ❯ "),s("div",G,[(o(!0),n(k,null,w(r.value,(g,f)=>(o(),n("span",{key:f,onClick:x=>t.value=f,class:A(["cursor-pointer w-3 h-3 rounded-full border border-gray-500",t.value===f?"bg-red-500":"bg-slate-100"])},null,10,J))),128))])]))}},K=V(Q,[["__scopeId","data-v-5ba32efe"]]),W=["content"],X=["content"],Y=["content"],tt=["content"],et=s("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1),st=["content"],ot=["content"],nt=s("meta",{property:"og:type",content:"article"},null,-1),at=["content"],lt=["content"],it=["content"],rt=s("meta",{name:"twitter:card",content:"summary_large_image"},null,-1),ct=["content"],dt=["content"],ut=["content"],mt=["content"],_t=["content"],pt=["content"],ht={class:"flex items-center justify-center my-1"},gt={itemprop:"headline",class:"text-center font-bolder text-3xl text-gray-900 dark:text-slate-100"},ft={itemprop:"interactionStatistic",itemscope:"",itemtype:"http://schema.org/InteractionCounter"},xt=s("meta",{itemprop:"interactionType",content:"http://schema.org/ViewAction"},null,-1),vt=["content"],yt=["title"],bt={itemprop:"datePublished",datetime:"{{ article.created_at.substring(0, 10) }}",class:"flex items-center justify-center font-semibold text-sm text-orange-500 dark:text-orange-400"},kt={key:0,class:"flex items-center justify-center my-3"},wt={itemprop:"description",class:"text-center text-xl text-teal-700 dark:text-teal-200 mr-2"},$t={key:1,class:"flex flex-col justify-center items-center",itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject"},Ct=s("meta",{itemprop:"width",content:"800"},null,-1),It=s("meta",{itemprop:"height",content:"600"},null,-1),jt={key:0,class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300 italic underline decoration-double",itemprop:"caption"},Lt=["innerHTML"],Bt={key:3,class:"flex justify-center items-center mb-3 font-semibold text-violet-600 dark:text-violet-300"},At={key:0},Mt={class:"flex justify-center items-center"},Nt={key:0,class:"font-semibold text-sky-600 dark:text-sky-300",itemprop:"author"},Pt={class:"mr-2"},St={key:4,class:"mt-4"},Tt={class:"mb-4 tracking-wide text-center font-semibold text-xl text-orange-400 dark:text-orange-300"},Dt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-1 xl:grid-cols-3 gap-4"},Vt={class:"relative w-full"},Et={class:"w-full aspect-[4/3] overflow-hidden"},Ft=["src","alt"],Ht={key:1,class:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-400"},zt={class:"text-gray-500 dark:text-gray-700"},Ot={class:"absolute bottom-0 left-0 w-full p-2 bg-slate-800 bg-opacity-75"},Rt={class:"text-xs font-semibold text-yellow-200"},Yt={__name:"Show",setup(h){const{t:u}=L(),{article:t,recommendedArticles:r,siteSettings:a}=B().props,d=$(!1);let c;const g=()=>{d.value=document.documentElement.classList.contains("dark")};T(()=>{g(),c=new MutationObserver(g),c.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),D(()=>{c&&c.disconnect()});const f=y(()=>d.value?a.PublicDarkBackgroundColor:a.PublicLightBackgroundColor);return(x,Ut)=>(o(),b(P,{title:e(t).title,"can-login":x.$page.props.canLogin,"can-register":x.$page.props.canRegister},{default:p(()=>[_(e(N),null,{default:p(()=>[s("title",null,i(e(t).title),1),s("meta",{name:"title",content:e(t).title||""},null,8,W),s("meta",{name:"description",content:e(t).meta_desc||""},null,8,X),s("meta",{name:"keywords",content:e(t).meta_keywords||""},null,8,Y),s("meta",{name:"author",content:e(t).author||""},null,8,tt),et,s("meta",{property:"og:title",content:e(t).title||""},null,8,st),s("meta",{property:"og:description",content:e(t).meta_desc||""},null,8,ot),nt,s("meta",{property:"og:url",content:`/articles/${e(t).url}`},null,8,at),s("meta",{property:"og:image",content:e(t).images&&e(t).images.length>0?e(t).images[0].url:""},null,8,lt),s("meta",{property:"og:locale",content:e(t).locale||"ru_RU"},null,8,it),rt,s("meta",{name:"twitter:title",content:e(t).title||""},null,8,ct),s("meta",{name:"twitter:description",content:e(t).meta_desc||""},null,8,dt),s("meta",{name:"twitter:image",content:e(t).images&&e(t).images.length>0?e(t).images[0].url:""},null,8,ut),s("meta",{itemprop:"name",content:e(t).title||""},null,8,mt),s("meta",{itemprop:"description",content:e(t).meta_desc||""},null,8,_t),s("meta",{itemprop:"image",content:e(t).images&&e(t).images.length>0?e(t).images[0].url:""},null,8,pt)]),_:1}),s("article",{itemscope:"",itemtype:"https://schema.org/BlogPosting",class:A(["flex-1 p-4 selection:bg-red-400 selection:text-white",f.value])},[s("header",null,[s("div",ht,[s("h1",gt,i(e(t).title),1),s("div",ft,[xt,s("meta",{itemprop:"userInteractionCount",content:e(t).views},null,8,vt),s("span",{title:e(u)("views"),class:"ml-2 px-1 py-0.5 text-xs font-semibold text-white bg-emerald-500 rounded-full"},i(e(t).views),9,yt)])]),s("time",bt,i(e(t).created_at.substring(0,10)),1)]),e(t).short?(o(),n("div",kt,[s("p",wt,i(e(t).short),1),_(j)])):m("",!0),e(t).images&&e(t).images.length>0?(o(),n("div",$t,[_(K,{images:e(t).images,link:`/articles/${e(t).url}`,class:"max-w-4xl"},null,8,["images","link"]),Ct,It,e(t).images[0].caption?(o(),n("div",jt,i(e(t).images[0].caption),1)):m("",!0)])):m("",!0),e(t).description?(o(),n("div",{key:2,class:"w-full max-w-4xl mx-auto my-4 p-2 text-center text-xl text-gray-700 dark:text-gray-200 border border-dashed border-slate-400 dark:border-slate-200",innerHTML:e(t).description,itemprop:"articleBody"},null,8,Lt)):m("",!0),e(t).tags?(o(),n("div",Bt,[(o(!0),n(k,null,w(e(t).tags,(l,M)=>(o(),n("span",{key:l.id},[_(e(v),{href:`/tags/${l.slug}`,itemprop:"keywords",class:"hover:text-rose-400 hover:dark:text-rose-300"},{default:p(()=>[I(i(l.name),1)]),_:2},1032,["href"]),M<e(t).tags.length-1?(o(),n("span",At,", ")):m("",!0)]))),128))])):m("",!0),s("div",Mt,[e(t).author?(o(),n("div",Nt,[s("span",Pt,i(e(t).author),1)])):m("",!0),_(j)]),e(r)&&e(r).length>0?(o(),n("div",St,[s("h2",Tt,i(e(u)("relatedArticles"))+": ",1),s("div",Dt,[(o(!0),n(k,null,w(e(r),l=>(o(),n("div",{key:l.id,class:"p-4 border border-gray-300 rounded shadow"},[s("div",Vt,[s("div",Et,[l.images&&l.images.length>0?(o(),n("img",{key:0,src:l.images[0].webp_url||l.images[0].url,alt:l.images[0].alt,class:"w-full h-full object-cover"},null,8,Ft)):(o(),n("div",Ht,[s("span",zt,i(e(u)("noCurrentImage")),1)]))]),s("div",Ot,[s("div",Rt,i(l.created_at.substring(0,10)),1),_(e(v),{href:`/articles/${l.url}`,class:"text-sm font-semibold text-white hover:text-amber-400"},{default:p(()=>[I(i(l.title),1)]),_:2},1032,["href"])])])]))),128))])])):m("",!0)],2)]),_:1},8,["title","can-login","can-register"]))}};export{Yt as default};
