import{y as B,u as M,T as D,z as N,l as y,e as z,o as S,w as d,f as l,i as o,p as _,t as m,k as e,A as q,q as C}from"./vendor-KLnQVH-z.js";import{A as E}from"./AdminLayout-DDIonVUW.js";import{T as A}from"./TitlePage-Dn5_Db7V.js";import{_ as w}from"./DefaultButton-mNfyXOKI.js";import{_ as c,a as f,b as F}from"./InputText-BNT2VvLh.js";import{_ as u}from"./InputError-5M0RC1-a.js";import{_ as L}from"./MetaDescTextarea-CmFtzWFr.js";import{_ as b,a as V,b as g}from"./InputNumber-BojX-z2D.js";import{_ as O,a as P}from"./TinyEditor-g-dxl2OY.js";import{_ as K}from"./MultiImageUpload-Bc_tB1VO.js";import{_ as R}from"./MultiImageEdit-Ct1F8eM_.js";import{_ as W,a as p}from"./SelectAthlete-CXo0Eu5l.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-p73LerAr.js";import"./ScrollButtons-D6M3P1oi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-GNuCPEap.js";import"./LocaleSelectOption-DQWMhK86.js";import"./app-CpeRQVat.js";import"./auth-image-XbvYdkSi.js";const G={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},H={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},J={class:"sm:flex sm:justify-between sm:items-center mb-2"},Q=l("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[l("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),X=l("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),Y={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},Z={class:"flex flex-row items-center gap-2"},ee={class:"flex flex-row items-center gap-2 w-auto"},te={class:"flex flex-row items-center gap-2"},se={class:"h-8 flex items-center"},le={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},oe={class:"flex flex-row items-center gap-2 w-full"},ae={class:"flex flex-row items-center justify-end w-full gap-2"},re={class:"flex justify-start w-full"},ie={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ne={class:"flex flex-row items-center justify-end w-full"},me={class:"mb-3 flex flex-col items-end w-96"},de={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ue={class:"flex flex-row items-center justify-end w-full"},ce={class:"h-8 flex items-center"},_e={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},fe={class:"flex flex-row items-center justify-end w-full"},he={class:"mb-3 flex flex-col items-start w-96"},ge={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},pe={class:"flex flex-row items-center justify-end w-full"},xe={class:"mb-3 flex flex-col items-start w-96"},ve={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ye={class:"mb-4 grid grid-cols-1 md:grid-cols-3 gap-4"},we={class:"mb-3 flex flex-col items-start"},be={class:"flex justify-between w-full"},Ve=l("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),Ue={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},je={class:"mb-3 flex flex-col items-start"},ke={class:"flex justify-between w-full"},$e={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ie={class:"mb-3 flex flex-col items-start"},Te={class:"mb-3 flex flex-row items-center justify-start gap-2"},Be={class:"h-8 flex items-center"},Me={class:"flex flex-row items-center gap-2"},De={class:"h-8 flex items-center"},Ne={class:"flex flex-row items-center gap-2"},ze={class:"h-8 flex items-center"},Se={class:"mb-3 flex flex-col items-end w-96"},qe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ce={class:"mt-4"},Ee={class:"mt-4"},Ae={class:"flex items-center justify-center mt-4"},Fe=l("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[l("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Le=l("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[l("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),nt={__name:"Edit",props:{tournament:{type:Object,required:!0},athletes:{type:Array,required:!0}},setup(U){const x=B(),{t:i}=M(),n=U,t=D({_method:"PUT",sort:n.tournament.sort??0,activity:!!n.tournament.activity,locale:n.tournament.locale??"",name:n.tournament.name??"",short:n.tournament.short??"",description:n.tournament.description??"",tournament_date_time:n.tournament.tournament_date_time??"",status:n.tournament.status??null,venue:n.tournament.venue??"",city:n.tournament.city??"",country:n.tournament.country??"",weight_class_name:n.tournament.weight_class_name??"",rounds_scheduled:n.tournament.rounds_scheduled??0,is_title_fight:!!n.tournament.is_title_fight,fighter_red_id:n.tournament.fighter_red_id??null,fighter_blue_id:n.tournament.fighter_blue_id??null,winner_id:n.tournament.winner_id??null,method_of_victory:n.tournament.method_of_victory??"",round_of_finish:n.tournament.round_of_finish??0,time_of_finish:n.tournament.time_of_finish??"",deletedImages:[]}),j=r=>{if(!r)return"";const s=new Date(r);return isNaN(s.getTime())?"":s.toISOString().split("T")[0]};N(()=>{t.tournament_date_time&&(t.tournament_date_time=j(t.tournament_date_time))});const h=y((n.tournament.images||[]).filter(r=>r.url).map(r=>({id:r.id,url:r.webp_url||r.url,order:r.order||0,alt:r.alt||"",caption:r.caption||""}))),v=y([]),k=r=>{h.value=r},$=r=>{t.deletedImages.includes(r)||t.deletedImages.push(r),h.value=h.value.filter(s=>s.id!==r)},I=r=>{v.value=r},T=()=>{t.transform(r=>({...r,activity:r.activity?1:0,is_title_fight:r.is_title_fight?1:0,images:[...v.value.map(s=>({file:s.file,order:s.order,alt:s.alt,caption:s.caption})),...h.value.map(s=>({id:s.id,order:s.order,alt:s.alt,caption:s.caption}))],deletedImages:t.deletedImages})),t.post(route("admin.tournaments.update",n.tournament.id),{forceFormData:!0,errorBag:"editTournament",preserveScroll:!0,onSuccess:()=>{x.success("Турнир успешно обновлён!")},onError:r=>{console.error("❌ Ошибки валидации:",r);const s=r[Object.keys(r)[0]];x.error(s||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(r,s)=>(S(),z(E,{title:e(i)("editTournament")},{header:d(()=>[o(A,null,{default:d(()=>[_(m(e(i)("editTournament"))+" ID:"+m(n.tournament.id),1)]),_:1})]),default:d(()=>[l("div",G,[l("div",H,[l("div",J,[o(w,{href:r.route("admin.tournaments.index")},{icon:d(()=>[Q]),default:d(()=>[_(" "+m(e(i)("back")),1)]),_:1},8,["href"]),X]),l("form",{onSubmit:q(T,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[l("div",Y,[l("div",Z,[o(b,{modelValue:e(t).activity,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).activity=a)},null,8,["modelValue"]),o(V,{for:"activity",text:e(i)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),l("div",ee,[o(O,{modelValue:e(t).locale,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).locale=a),errorMessage:e(t).errors.locale},null,8,["modelValue","errorMessage"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.locale},null,8,["message"])]),l("div",te,[l("div",se,[o(c,{for:"sort",value:e(i)("sort"),class:"text-sm"},null,8,["value"])]),o(g,{id:"sort",type:"number",modelValue:e(t).sort,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).sort=a),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.sort},null,8,["message"])])]),l("div",le,[l("div",oe,[o(b,{modelValue:e(t).is_title_fight,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).is_title_fight=a)},null,8,["modelValue"]),o(V,{for:"is_title_fight",text:e(i)("isTitleFight"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),l("div",ae,[l("div",re,[o(c,{for:"tournament_date_time",value:e(i)("date"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),o(f,{id:"tournament_date_time",type:"date",modelValue:e(t).tournament_date_time,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).tournament_date_time=a),autocomplete:"tournament_date_time",class:"w-full max-w-56"},null,8,["modelValue"]),o(u,{class:"mt-1 sm:mt-0",message:e(t).errors.tournament_date_time},null,8,["message"])])]),o(W,{modelValue:e(t).status,"onUpdate:modelValue":s[5]||(s[5]=a=>e(t).status=a),error:e(t).errors.status},null,8,["modelValue","error"])]),l("div",ie,[l("div",ne,[o(c,{for:"weight_class_name",class:"mt-4 mr-2"},{default:d(()=>[_(m(e(i)("weightClassName")),1)]),_:1}),l("div",me,[l("div",de,m(e(t).weight_class_name.length)+" / 100 "+m(e(i)("characters")),1),o(f,{id:"weight_class_name",type:"text",modelValue:e(t).weight_class_name,"onUpdate:modelValue":s[6]||(s[6]=a=>e(t).weight_class_name=a),maxlength:"100",autocomplete:"weight_class_name",placeholder:e(i)("placeholderWeightClassName")},null,8,["modelValue","placeholder"]),o(u,{class:"mt-2",message:e(t).errors.weight_class_name},null,8,["message"])])]),l("div",ue,[l("div",ce,[o(c,{for:"rounds_scheduled",value:e(i)("roundsScheduled"),class:"mr-2 w-auto"},null,8,["value"])]),o(g,{id:"rounds_scheduled",type:"number",modelValue:e(t).rounds_scheduled,"onUpdate:modelValue":s[7]||(s[7]=a=>e(t).rounds_scheduled=a),autocomplete:"rounds_scheduled",class:"max-w-20"},null,8,["modelValue"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.rounds_scheduled},null,8,["message"])])]),l("div",_e,[l("div",fe,[o(c,{for:"country",class:"mt-4 mr-2"},{default:d(()=>[_(m(e(i)("country")),1)]),_:1}),l("div",he,[l("div",ge,m(e(t).country.length)+" / 100 "+m(e(i)("characters")),1),o(f,{class:"max-w-80",id:"country",type:"text",modelValue:e(t).country,"onUpdate:modelValue":s[8]||(s[8]=a=>e(t).country=a),maxlength:"100",required:"",autocomplete:"country"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.country},null,8,["message"])])]),l("div",pe,[o(c,{for:"country",class:"mt-4 mr-2"},{default:d(()=>[_(m(e(i)("city")),1)]),_:1}),l("div",xe,[l("div",ve,m(e(t).city.length)+" / 100 "+m(e(i)("characters")),1),o(f,{class:"max-w-80",id:"city",type:"text",modelValue:e(t).city,"onUpdate:modelValue":s[9]||(s[9]=a=>e(t).city=a),maxlength:"100",required:"",autocomplete:"city"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.city},null,8,["message"])])])]),l("div",ye,[o(p,{modelValue:e(t).fighter_red_id,"onUpdate:modelValue":s[10]||(s[10]=a=>e(t).fighter_red_id=a),options:n.athletes,label:e(i)("fighterRed"),error:e(t).errors.fighter_red_id},null,8,["modelValue","options","label","error"]),o(p,{modelValue:e(t).fighter_blue_id,"onUpdate:modelValue":s[11]||(s[11]=a=>e(t).fighter_blue_id=a),options:n.athletes,label:e(i)("fighterBlue"),error:e(t).errors.fighter_blue_id},null,8,["modelValue","options","label","error"]),o(p,{modelValue:e(t).winner_id,"onUpdate:modelValue":s[12]||(s[12]=a=>e(t).winner_id=a),options:n.athletes,label:e(i)("winner"),error:e(t).errors.winner_id},null,8,["modelValue","options","label","error"])]),l("div",we,[l("div",be,[o(c,{for:"name"},{default:d(()=>[Ve,_(" "+m(e(i)("title")),1)]),_:1}),l("div",Ue,m(e(t).name.length)+" / 255 "+m(e(i)("characters")),1)]),o(f,{id:"name",type:"text",modelValue:e(t).name,"onUpdate:modelValue":s[13]||(s[13]=a=>e(t).name=a),maxlength:"255",required:"",autocomplete:"name"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.name},null,8,["message"])]),l("div",je,[l("div",ke,[o(c,{for:"short",value:e(i)("shortDescription")},null,8,["value"]),l("div",$e,m(e(t).short.length)+" / 255 "+m(e(i)("characters")),1)]),o(L,{modelValue:e(t).short,"onUpdate:modelValue":s[14]||(s[14]=a=>e(t).short=a),class:"w-full"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.short},null,8,["message"])]),l("div",Ie,[o(c,{for:"description",value:e(i)("description")},null,8,["value"]),o(P,{modelValue:e(t).description,"onUpdate:modelValue":s[15]||(s[15]=a=>e(t).description=a),height:500},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.description},null,8,["message"])]),l("div",Te,[l("div",Be,[o(c,{for:"time_of_finish",class:"mr-2 w-auto"},{default:d(()=>[_(m(e(i)("timeFinish")),1)]),_:1})]),o(f,{class:"max-w-20",id:"time_of_finish",type:"text",modelValue:e(t).time_of_finish,"onUpdate:modelValue":s[16]||(s[16]=a=>e(t).time_of_finish=a),maxlength:"8",autocomplete:"time_of_finish",placeholder:"02:35"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.time_of_finish},null,8,["message"])]),l("div",Me,[l("div",De,[o(c,{for:"round_of_finish",value:e(i)("roundFinish"),class:"mr-2 w-auto"},null,8,["value"])]),o(g,{id:"round_of_finish",type:"number",modelValue:e(t).round_of_finish,"onUpdate:modelValue":s[17]||(s[17]=a=>e(t).round_of_finish=a),maxlength:"2",autocomplete:"round_of_finish",class:"max-w-20"},null,8,["modelValue"]),o(u,{class:"mt-2 lg:mt-0",message:e(t).errors.round_of_finish},null,8,["message"])]),l("div",Ne,[l("div",ze,[o(c,{for:"method_of_victory",class:"mr-2 mt-4 w-auto"},{default:d(()=>[_(m(e(i)("methodVictory")),1)]),_:1})]),l("div",Se,[l("div",qe,m(e(t).method_of_victory.length)+" / 100 "+m(e(i)("characters")),1),o(f,{id:"method_of_victory",type:"text",modelValue:e(t).method_of_victory,"onUpdate:modelValue":s[18]||(s[18]=a=>e(t).method_of_victory=a),maxlength:"100",autocomplete:"method_of_victory",placeholder:"KO, Submission"},null,8,["modelValue"]),o(u,{class:"mt-2",message:e(t).errors.method_of_victory},null,8,["message"])])]),l("div",Ce,[o(R,{images:h.value,"onUpdate:images":k,onDeleteImage:$},null,8,["images"])]),l("div",Ee,[o(K,{"onUpdate:images":I})]),l("div",Ae,[o(w,{href:r.route("admin.tournaments.index"),class:"mb-3"},{icon:d(()=>[Fe]),default:d(()=>[_(" "+m(e(i)("back")),1)]),_:1},8,["href"]),o(F,{class:C(["ms-4",{"opacity-25":e(t).processing}]),disabled:e(t).processing},{icon:d(()=>[Le]),default:d(()=>[_(" "+m(e(i)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{nt as default};
