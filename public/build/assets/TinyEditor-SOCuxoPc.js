import{_ as M,a as j,b as Z}from"./app-kw_2sf2l.js";import{u as x,l as g,z as C,m as i,o as r,f as l,i as w,w as E,p as L,t as _,k as v,F as S,v as T,C as y,b5 as z}from"./vendor-DbgL49-7.js";import{_ as I}from"./InputText-DJhJB5OF.js";import{_ as H}from"./InputError-BayopZIr.js";const B={class:"flex flex-row items-center gap-2 w-auto"},D={class:"h-8 flex items-center justify-between w-full"},F=l("span",{class:"text-sm text-red-500 dark:text-red-300 font-semibold"},"*",-1),N=["value"],O={value:"",disabled:""},q=["value"],oe={__name:"SelectLocale",props:{modelValue:String,errorMessage:String},emits:["update:modelValue"],setup(u,{emit:f}){const{t:d}=x(),m=g(Object.keys(Object.assign({"../../../locales/en.js":Z,"../../../locales/kk.js":j,"../../../locales/ru.js":M})).map(a=>{const n=a.match(/\/([a-z]{2})\.js$/i);if(n){const t=n[1];return{label:t.toUpperCase(),value:t}}return null}).filter(a=>a!==null));return C(()=>{}),(a,n)=>(r(),i("div",B,[l("div",D,[w(I,{for:"locale"},{default:E(()=>[F,L(" "+_(v(d)("localization")),1)]),_:1})]),l("select",{id:"locale",value:u.modelValue,onChange:n[0]||(n[0]=t=>a.$emit("update:modelValue",t.target.value)),class:"block w-full py-0.5 border-slate-500 font-semibold text-sm focus:border-indigo-500 focus:ring-indigo-300 rounded-sm shadow-sm dark:bg-cyan-800 dark:text-slate-100"},[l("option",O,_(v(d)("selectLocale")),1),(r(!0),i(S,null,T(m.value,t=>(r(),i("option",{key:t.value,value:t.value},_(t.label),9,q))),128))],40,N),w(H,{class:"mt-2 lg:mt-0",message:u.errorMessage},null,8,["message"])]))}},A={class:"flex flex-row justify-between items-start"},U={class:"flex-grow"},G=["value"],J=["title"],K={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",width:"16",height:"16"},P=l("path",{class:"fill-current text-red-400 dark:text-yellow-200",d:"M7 0h2v2H7V0Zm5.88 1.637 1.414 1.415-1.415 1.413-1.414-1.414 1.415-1.414ZM14 7h2v2h-2V7Zm-1.05 7.433-1.415-1.414 1.414-1.414 1.415 1.413-1.414 1.415ZM7 14h2v2H7v-2Zm-4.02.363L1.566 12.95l1.415-1.414 1.414 1.415-1.415 1.413ZM0 7h2v2H0V7Zm3.05-5.293L4.465 3.12 3.05 4.535 1.636 3.121 3.05 1.707Z"},null,-1),Q=l("path",{class:"fill-current text-red-400 dark:text-yellow-200",d:"M8 4C5.8 4 4 5.8 4 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Z"},null,-1),R=[P,Q],W={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",width:"16",height:"16"},X=l("path",{class:"fill-current text-slate-900 dark:text-white",d:"M6.2 2C3.2 2.8 1 5.6 1 8.9 1 12.8 4.2 16 8.1 16c3.3 0 6-2.2 6.9-5.2C9.7 12.2 4.8 7.3 6.2 2Z"},null,-1),Y=l("path",{class:"fill-current text-slate-900 dark:text-white",d:"M12.5 6a.625.625 0 0 1-.625-.625 1.252 1.252 0 0 0-1.25-1.25.625.625 0 1 1 0-1.25 1.252 1.252 0 0 0 1.25-1.25.625.625 0 1 1 1.25 0c.001.69.56 1.249 1.25 1.25a.625.625 0 1 1 0 1.25c-.69.001-1.249.56-1.25 1.25A.625.625 0 0 1 12.5 6Z"},null,-1),ee=[X,Y],ae={__name:"TinyEditor",props:{modelValue:String,height:{type:Number,default:300}},emits:["update:modelValue"],setup(u,{emit:f}){const{t:d}=x(),o=u,m=f,a=`editor-${Math.random().toString(36).substr(2,9)}`,n=g(document.documentElement.classList.contains("dark")),t=g(null),c=g(!1),p=e=>{requestAnimationFrame(()=>{if(t.value&&t.value.getContainer()){const s=t.value.getContainer();s&&e&&(s.style.height=`${e}px`,s.style.minHeight=`${e}px`)}})},V=()=>({selector:`#${a}`,min_height:o.height,resize:!1,menubar:!0,plugins:"accordion advlist anchor autolink autoresize autosave charmap code codesample directionality emoticons fullscreen help image importcss insertdatetime link lists media nonbreaking pagebreak preview quickbars save searchreplace table visualblocks visualchars wordcount",toolbar:"undo redo | formatselect | bold italic underline strikethrough | forecolor backcolor | link image media | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | code preview fullscreen",skin_url:n.value?"/tinymce/skins/ui/oxide-dark":"/tinymce/skins/ui/oxide",content_css:n.value?"/tinymce/skins/content/dark/content.min.css":"/tinymce/skins/content/default/content.min.css",language_url:"/tinymce/langs/ru.js",language:"ru",branding:!1,license_key:"gpl",setup(e){t.value=e,e.on("init",s=>{c.value=!0,e.setContent(o.modelValue||""),p(o.height)}),e.on("change input",()=>{const s=e.getContent();o.modelValue!==s&&m("update:modelValue",s)}),e.on("blur",()=>{const s=e.getContent();o.modelValue!==s&&m("update:modelValue",s)})}}),k=()=>{if(!window.tinymce)return;const e=window.tinymce.get(a);e&&(e.destroy(),t.value=null,c.value=!1),window.tinymce.init(V())},b=()=>{const e=t.value?t.value.getContent():o.modelValue;n.value=!n.value,k(),setTimeout(()=>{t.value&&c.value&&t.value.getContent()!==(e||"")&&t.value.setContent(e||"")},150)};y(()=>o.modelValue,(e,s)=>{t.value&&c.value&&e!==s&&t.value.getContent()!==e&&t.value.setContent(e||"")}),y(()=>o.height,e=>{c.value&&p(e)});let h=null;const $=()=>{document.documentElement.classList.contains("dark")!==n.value&&b()};return C(()=>{k(),h=new MutationObserver($),h.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),z(()=>{var s;const e=(s=window.tinymce)==null?void 0:s.get(a);e&&(e.destroy(),t.value=null),h&&h.disconnect()}),(e,s)=>(r(),i("div",A,[l("div",U,[l("textarea",{id:a,value:o.modelValue},null,8,G)]),l("button",{type:"button",onClick:b,title:v(d)("changeEditorTheme"),class:"flex items-center justify-center ml-2 w-6 h-6 flex-shrink-0 rounded-full <!-- flex-shrink-0 чтобы кнопка не сжималась --> bg-slate-100 dark:bg-slate-900 hover:bg-yellow-100 dark:hover:bg-slate-600/80 transition-colors"},[n.value?(r(),i("svg",W,ee)):(r(),i("svg",K,R))],8,J)]))}};export{oe as _,ae as a};
