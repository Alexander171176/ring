import{o as z,A as B,P as C,D as u,H as a,k as s,I as f,J as m,u as e,L as V,y as D}from"./vue-DrbZvlgE.js";import{a as L,u as N,T as I}from"./app-Bp8GUED0.js";import{_ as S,t as F}from"./MetatagsButton-Dkqzb1E_.js";import{A as H}from"./AdminLayout-m43ZpFmT.js";import{T as O}from"./TitlePage-CVAOVWeu.js";import{_ as y}from"./DefaultButton-B4OupGBJ.js";import{_ as d,a as p,b as q}from"./InputText-DBtoU87u.js";import{_,a as x,b as h}from"./InputNumber-D963n_HP.js";import"./ckeditor-Dh_eORW-.js";import{_ as k}from"./MetaDescTextarea-DjPUZo-s.js";import{_ as n}from"./InputError-CDoDc20f.js";import{_ as E,a as P}from"./TinyEditor-CxBa4bIm.js";import{_ as J}from"./MultiImageUpload-Cl2NMbU3.js";import{s as b}from"./vue-multiselect.min.css_vue_type_style_index_0_src_true_lang-DWHVxuBV.js";import"./vendor-CGnu3J7H.js";import"./ScrollButtons-DwaEk0p5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-Cy7DQwuF.js";import"./LocaleSelectOption-DauWSBmB.js";import"./auth-image-XbvYdkSi.js";const K={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},G={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},Q={class:"sm:flex sm:justify-between sm:items-center mb-2"},R=a("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[a("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),W=a("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),X={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},Y={class:"flex flex-row items-center gap-2"},Z={class:"flex flex-row items-center gap-2 w-auto"},ee={class:"flex flex-row items-center gap-2"},te={class:"h-8 flex items-center"},le={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},se={class:"flex flex-row items-center gap-2"},ae={class:"flex flex-row items-center gap-2"},oe={class:"flex flex-row items-center gap-2"},re={class:"mb-3 flex flex-col items-start"},ie={class:"mb-3 flex flex-col items-start"},me=a("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),de={class:"mb-3 flex flex-col items-start"},ne=a("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),ue={class:"mb-3 flex flex-col items-start"},ce={class:"flex justify-between w-full"},fe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},pe={class:"mb-3 flex flex-col items-start"},_e={class:"mb-3 flex flex-col lg:flex-row sm:justify-between sm:space-x-4"},xe={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},ge={class:"flex flex-col lg:flex-row items-center mb-2 lg:mb-0 flex-1"},ve={class:"mb-3 flex flex-col items-start"},he={class:"mb-3 flex flex-col items-start"},be={class:"mb-3 flex justify-between"},we={class:"flex flex-row items-center"},Ve={class:"flex flex-row items-center"},ye={class:"mb-3 flex flex-col items-start"},ke={class:"flex justify-between w-full"},Ue={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},je={class:"mb-3 flex flex-col items-start"},$e={class:"flex justify-between w-full"},Me={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ae={class:"mb-3 flex flex-col items-start"},Te={class:"flex justify-between w-full"},ze={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Be={class:"flex justify-end mt-4"},Ce=a("svg",{class:"w-4 h-4 fill-current text-slate-600 shrink-0 mr-2",viewBox:"0 0 16 16"},[a("path",{d:"M13 7h2v6a1 1 0 01-1 1H4v2l-4-3 4-3v2h9V7zM3 9H1V3a1 1 0 011-1h10V0l4 3-4 3V4H3v5z"})],-1),De={class:"flex items-center justify-center mt-4"},Le=a("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[a("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),Ne=a("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[a("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),st={__name:"Create",props:{sections:Array,tags:Array,images:Array,related_articles:{type:Array,default:()=>[]}},setup(g){const w=L(),{t:r}=N(),t=I({sort:0,locale:"",title:"",url:"",short:"",description:"",author:"",published_at:"",views:"",likes:"",meta_title:"",meta_keywords:"",meta_desc:"",activity:!1,left:!1,main:!1,right:!1,sections:[],tags:[],related_articles:[],images:[]}),U=i=>{if(!i)return"";const l=new Date(i);return isNaN(l.getTime())?"":l.toISOString().split("T")[0]};z(()=>{t.published_at&&(t.published_at=U(t.published_at))});const j=()=>{t.title&&(t.url=F(t.title.toLowerCase()))},v=(i,l,o=!1)=>{if(i.length<=l)return i;const c=i.substr(0,i.lastIndexOf(" ",l));return o?`${c}...`:c},$=()=>{if(t.title&&!t.meta_title&&(t.meta_title=v(t.title,160)),!t.meta_keywords&&t.short){let i=t.short.replace(/(<([^>]+)>)/gi,"");i=i.replace(/[.,!?;:()\[\]{}"'«»]/g,"");const o=i.split(/\s+/).filter(c=>c&&c.length>=3).map(c=>c.toLowerCase()).filter((c,A,T)=>T.indexOf(c)===A).join(", ");t.meta_keywords=v(o,255)}if(t.short&&!t.meta_desc){const i=t.short.replace(/(<([^>]+)>)/gi,"");t.meta_desc=v(i,200,!0)}},M=()=>{t.transform(i=>({...i,activity:i.activity?1:0,left:i.left?1:0,main:i.main?1:0,right:i.right?1:0,images:t.images.map(l=>{if(l.file)return{file:l.file,order:l.order,alt:l.alt,caption:l.caption};if(l.id)return{id:Number(l.id),order:l.order,alt:l.alt,caption:l.caption}}).filter(Boolean)})),t.post(route("admin.articles.store"),{preserveScroll:!0,onSuccess:()=>{w.success("Статья успешно создана!")},onError:i=>{console.error("Не удалось отправить форму:",i);const l=i[Object.keys(i)[0]];w.error(l||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(i,l)=>(C(),B(H,{title:e(r)("createArticle")},{header:u(()=>[s(O,null,{default:u(()=>[f(m(e(r)("createArticle")),1)]),_:1})]),default:u(()=>[a("div",K,[a("div",G,[a("div",Q,[s(y,{href:i.route("admin.articles.index")},{icon:u(()=>[R]),default:u(()=>[f(" "+m(e(r)("back")),1)]),_:1},8,["href"]),W]),a("form",{onSubmit:V(M,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[a("div",X,[a("div",Y,[s(_,{modelValue:e(t).activity,"onUpdate:modelValue":l[0]||(l[0]=o=>e(t).activity=o)},null,8,["modelValue"]),s(x,{for:"activity",text:e(r)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),a("div",Z,[s(E,{modelValue:e(t).locale,"onUpdate:modelValue":l[1]||(l[1]=o=>e(t).locale=o),errorMessage:e(t).errors.locale},null,8,["modelValue","errorMessage"]),s(n,{class:"mt-2 lg:mt-0",message:e(t).errors.locale},null,8,["message"])]),a("div",ee,[a("div",te,[s(d,{for:"sort",value:e(r)("sort"),class:"text-sm"},null,8,["value"])]),s(h,{id:"sort",type:"number",modelValue:e(t).sort,"onUpdate:modelValue":l[2]||(l[2]=o=>e(t).sort=o),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),s(n,{class:"mt-2 lg:mt-0",message:e(t).errors.sort},null,8,["message"])])]),a("div",le,[a("div",se,[s(_,{modelValue:e(t).left,"onUpdate:modelValue":l[3]||(l[3]=o=>e(t).left=o)},null,8,["modelValue"]),s(x,{for:"left",text:e(r)("left"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),a("div",ae,[s(_,{modelValue:e(t).main,"onUpdate:modelValue":l[4]||(l[4]=o=>e(t).main=o)},null,8,["modelValue"]),s(x,{for:"main",text:e(r)("main"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),a("div",oe,[s(_,{modelValue:e(t).right,"onUpdate:modelValue":l[5]||(l[5]=o=>e(t).right=o)},null,8,["modelValue"]),s(x,{for:"right",text:e(r)("right"),class:"text-sm h-8 flex items-center"},null,8,["text"])])]),a("div",re,[s(d,{for:"sections",value:e(r)("sections"),class:"mb-1"},null,8,["value"]),s(e(b),{modelValue:e(t).sections,"onUpdate:modelValue":l[6]||(l[6]=o=>e(t).sections=o),options:g.sections,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"])]),a("div",ie,[s(d,{for:"title"},{default:u(()=>[me,f(" "+m(e(r)("postTitle")),1)]),_:1}),s(p,{id:"title",type:"text",modelValue:e(t).title,"onUpdate:modelValue":l[7]||(l[7]=o=>e(t).title=o),required:"",autocomplete:"title"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.title},null,8,["message"])]),a("div",de,[s(d,{for:"url"},{default:u(()=>[ne,f(" "+m(e(r)("postUrl")),1)]),_:1}),s(p,{id:"url",type:"text",modelValue:e(t).url,"onUpdate:modelValue":l[8]||(l[8]=o=>e(t).url=o),required:"",autocomplete:"url",onFocus:j},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.url},null,8,["message"])]),a("div",ue,[a("div",ce,[s(d,{for:"short",value:e(r)("shortDescription")},null,8,["value"]),a("div",fe,m(e(t).short.length)+" / 255 "+m(e(r)("characters")),1)]),s(k,{modelValue:e(t).short,"onUpdate:modelValue":l[9]||(l[9]=o=>e(t).short=o),class:"w-full"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.short},null,8,["message"])]),a("div",pe,[s(d,{for:"description",value:e(r)("description")},null,8,["value"]),s(P,{modelValue:e(t).description,"onUpdate:modelValue":l[10]||(l[10]=o=>e(t).description=o),height:500},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.description},null,8,["message"])]),a("div",_e,[a("div",xe,[s(d,{for:"published_at",value:e(r)("publishedAt"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(p,{id:"published_at",type:"date",modelValue:e(t).published_at,"onUpdate:modelValue":l[11]||(l[11]=o=>e(t).published_at=o),autocomplete:"published_at",class:"w-full max-w-56"},null,8,["modelValue"]),s(n,{class:"mt-1 sm:mt-0",message:e(t).errors.published_at},null,8,["message"])]),a("div",ge,[s(d,{for:"author",value:e(r)("postAuthor"),class:"w-40 mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),s(p,{id:"author",type:"text",modelValue:e(t).author,"onUpdate:modelValue":l[12]||(l[12]=o=>e(t).author=o),autocomplete:"author",class:"w-full"},null,8,["modelValue"]),s(n,{class:"mt-1 sm:mt-0",message:e(t).errors.author},null,8,["message"])])]),a("div",ve,[s(d,{for:"tags",value:e(r)("tags"),class:"mb-1"},null,8,["value"]),s(e(b),{modelValue:e(t).tags,"onUpdate:modelValue":l[13]||(l[13]=o=>e(t).tags=o),options:g.tags,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"name","track-by":"name"},null,8,["modelValue","options","placeholder"])]),a("div",he,[s(d,{for:"related_articles",value:e(r)("relatedArticles"),class:"mb-1"},null,8,["value"]),s(e(b),{modelValue:e(t).related_articles,"onUpdate:modelValue":l[14]||(l[14]=o=>e(t).related_articles=o),options:g.related_articles,multiple:!0,"close-on-select":!0,placeholder:e(r)("select"),label:"title","track-by":"title"},null,8,["modelValue","options","placeholder"]),s(n,{class:"mt-2",message:e(t).errors.related_articles},null,8,["message"])]),a("div",be,[a("div",we,[s(d,{for:"views",value:e(r)("views"),class:"mr-3"},null,8,["value"]),s(h,{id:"views",type:"number",modelValue:e(t).views,"onUpdate:modelValue":l[15]||(l[15]=o=>e(t).views=o),autocomplete:"views"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.views},null,8,["message"])]),a("div",Ve,[s(d,{for:"likes",value:e(r)("likes"),class:"mr-3"},null,8,["value"]),s(h,{id:"likes",type:"number",modelValue:e(t).likes,"onUpdate:modelValue":l[16]||(l[16]=o=>e(t).likes=o),autocomplete:"likes"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.likes},null,8,["message"])])]),a("div",ye,[a("div",ke,[s(d,{for:"meta_title",value:e(r)("metaTitle")},null,8,["value"]),a("div",Ue,m(e(t).meta_title.length)+" / 160 "+m(e(r)("characters")),1)]),s(p,{id:"meta_title",type:"text",modelValue:e(t).meta_title,"onUpdate:modelValue":l[17]||(l[17]=o=>e(t).meta_title=o),maxlength:"160",autocomplete:"url"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.meta_title},null,8,["message"])]),a("div",je,[a("div",$e,[s(d,{for:"meta_keywords",value:e(r)("metaKeywords")},null,8,["value"]),a("div",Me,m(e(t).meta_keywords.length)+" / 255 "+m(e(r)("characters")),1)]),s(p,{id:"meta_keywords",type:"text",modelValue:e(t).meta_keywords,"onUpdate:modelValue":l[18]||(l[18]=o=>e(t).meta_keywords=o),maxlength:"255",autocomplete:"url"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.meta_keywords},null,8,["message"])]),a("div",Ae,[a("div",Te,[s(d,{for:"meta_desc",value:e(r)("metaDescription")},null,8,["value"]),a("div",ze,m(e(t).meta_desc.length)+" / 200 "+m(e(r)("characters")),1)]),s(k,{modelValue:e(t).meta_desc,"onUpdate:modelValue":l[19]||(l[19]=o=>e(t).meta_desc=o),maxlength:"200",class:"w-full"},null,8,["modelValue"]),s(n,{class:"mt-2",message:e(t).errors.meta_desc},null,8,["message"])]),a("div",Be,[s(S,{onClick:V($,["prevent"])},{icon:u(()=>[Ce]),default:u(()=>[f(" "+m(e(r)("generateMetaTags")),1)]),_:1})]),s(J,{"onUpdate:images":l[20]||(l[20]=o=>e(t).images=o)}),a("div",De,[s(y,{href:i.route("admin.articles.index"),class:"mb-3"},{icon:u(()=>[Le]),default:u(()=>[f(" "+m(e(r)("back")),1)]),_:1},8,["href"]),s(q,{class:D(["ms-4 mb-0",{"opacity-25":e(t).processing}]),disabled:e(t).processing},{icon:u(()=>[Ne]),default:u(()=>[f(" "+m(e(r)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{st as default};
