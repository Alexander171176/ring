import{r as _,w as b,x as k,G as w,P as y,H as s,k as l,J as u,L as g,u as c,D as V,I as h}from"./vue-DrbZvlgE.js";import{u as $}from"./app-Bp8GUED0.js";import{a as E}from"./vendor-CGnu3J7H.js";import B from"./CloseIconButton-DxlTEOXb.js";import r from"./LabelInput-CSMWqEz2.js";import f from"./InputText-C97gofqK.js";import p from"./DescriptionTextarea-CyDwSg-g.js";import N from"./CancelButton-DwiZ8Iqb.js";import U from"./PrimaryButton-Dyfexr8A.js";import j from"./LabelCheckbox-BWFyS-jE.js";import C from"./ActivityCheckbox-BiS-pc2Z.js";import S from"./InputNumber-Bys4tsUm.js";const z={key:0,class:"fixed inset-0 flex items-center justify-center z-50 overflow-y-auto custom-scrollbar"},q=s("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),D={class:"absolute w-full max-w-screen-2xl max-h-screen overflow-y-auto bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg z-10 custom-scrollbar"},G={class:"text-center text-lg font-bold mb-2 text-gray-600 dark:text-slate-100 tracking-wide"},I={class:"pb-12"},M={class:"mb-3 flex items-center"},H={class:"flex justify-between w-full"},J={class:"flex flex-row items-center"},L={class:"flex flex-row items-center"},O={class:"mb-3 flex flex-col items-start"},P={class:"mb-3 flex flex-col items-start"},T={class:"mb-3 flex flex-col items-start"},A={class:"mb-3 flex flex-col items-start"},F={class:"fixed bottom-0 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-800 p-4 shadow-md z-20 w-full max-w-screen-2xl"},K={class:"flex justify-end"},ie={__name:"EditBlockModal",props:{block:{type:Object,default:()=>({})},show:{type:Boolean,required:!0},isEdit:{type:Boolean,default:!1},pluginName:{type:String,required:!0}},emits:["close","update"],setup(n,{emit:v}){const{t:d}=$(),a=n,m=v,t=_({...a.block});b(()=>a.block,i=>{t.value={...i}},{immediate:!0});const x=async()=>{try{const i=`/api/plugins/${a.pluginName}/blocks${a.isEdit?`/${t.value.id}`:""}`,e=a.isEdit?"put":"post";await E({method:e,url:i,data:t.value}),m("update"),m("close")}catch{}};return(i,e)=>n.show?(y(),k("div",z,[q,s("div",D,[l(B,{onClose:e[0]||(e[0]=o=>m("close"))}),s("h2",G,u(n.isEdit?"Редактировать блок":"Создать блок"),1),s("form",{onSubmit:g(x,["prevent"]),class:"p-3 w-full"},[s("div",I,[s("div",M,[s("div",H,[s("div",J,[l(C,{modelValue:t.value.activity,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.activity=o)},null,8,["modelValue"]),l(j,{for:"activity",text:c(d)("activity")},null,8,["text"])])]),s("div",L,[l(r,{for:"sort",value:c(d)("sort"),class:"mr-3"},null,8,["value"]),l(S,{id:"sort",type:"number",modelValue:t.value.sort,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.sort=o),autocomplete:"sort"},null,8,["modelValue"])])]),s("div",O,[l(r,{for:"block.links",value:"Ссылка блока"}),l(f,{id:"links",type:"text",modelValue:t.value.links,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.links=o),autocomplete:"links"},null,8,["modelValue"])]),s("div",P,[l(r,{for:"svg_blocks",value:"SVG блока"}),l(p,{modelValue:t.value.svg_blocks,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.svg_blocks=o),class:"w-full"},null,8,["modelValue"])]),s("div",T,[l(r,{for:"title",value:"Текст заголовка"}),l(f,{id:"title",type:"text",modelValue:t.value.title,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.title=o),autocomplete:"links"},null,8,["modelValue"])]),s("div",A,[l(r,{for:"paragraph",value:"Текст параграфа"}),l(p,{modelValue:t.value.paragraph,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.paragraph=o),class:"w-full"},null,8,["modelValue"])])]),s("div",F,[s("div",K,[l(U,{type:"submit"},{default:V(()=>[h(u(n.isEdit?"Сохранить":"Создать"),1)]),_:1}),l(N,{onClick:e[7]||(e[7]=o=>m("close")),class:"ml-2"})])])],32)])])):w("",!0)}};export{ie as default};
