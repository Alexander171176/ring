import{u as T,m as v,o as c,f as t,t as l,k as i,F as I,v as M,i as u,y as U,l as f,C as A,E as P,G as $,e as C,w as _,n as S,p as D}from"./vendor-RLSRVg0u.js";import{A as F}from"./AdminLayout-BKlaFo32.js";import{T as L}from"./TitlePage-FZyLO7ZL.js";import{_ as H}from"./DefaultButton-nL57tpOx.js";import{_ as z,a as G,b as O}from"./CountTable-BB0DAeyh.js";import{_ as Q,a as q,b as J}from"./SearchInput-CHCcR2M1.js";import{_ as K}from"./IconEdit-BtD_rftc.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-xl9ghVBF.js";import"./ScrollButtons-Bf8O8t11.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationMark-xXghvFch.js";import"./ResponsiveNavLink-BMppKKTO.js";import"./LocaleSelectOption-B-81EClK.js";import"./app-DnDP20Mi.js";import"./auth-image-XbvYdkSi.js";const R={class:"bg-white dark:bg-slate-700 shadow-lg rounded-sm border border-slate-200 dark:border-slate-600 relative"},W={class:"overflow-x-auto"},X={key:0,class:"table-auto w-full text-slate-700 dark:text-slate-100"},Y={class:"text-sm font-semibold uppercase bg-slate-200 dark:bg-cyan-900 border border-solid border-gray-300 dark:border-gray-700"},Z={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap w-px"},ee={class:"font-semibold text-center"},te={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},se={class:"font-semibold text-left"},oe={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},ae={class:"font-semibold text-end"},re={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},ie={class:"text-center"},le={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},ne={class:"text-left text-teal-600 dark:text-violet-200"},de={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},ce={class:"flex justify-end space-x-2"},me={key:1,class:"p-5 text-center text-slate-700 dark:text-slate-100"},ue={__name:"PermissionTable",props:{permissions:Array},emits:["edit","delete"],setup(d,{emit:m}){const{t:r}=T();return(p,n)=>(c(),v("div",R,[t("div",W,[d.permissions.length>0?(c(),v("table",X,[t("thead",Y,[t("tr",null,[t("th",Z,[t("div",ee,l(i(r)("id")),1)]),t("th",te,[t("div",se,l(i(r)("name")),1)]),t("th",oe,[t("div",ae,l(i(r)("actions")),1)])])]),t("tbody",null,[(c(!0),v(I,null,M(d.permissions,a=>(c(),v("tr",{key:a.id,class:"text-sm font-semibold border-b-2 hover:bg-slate-100 dark:hover:bg-cyan-800"},[t("td",re,[t("div",ie,l(a.id),1)]),t("td",le,[t("div",ne,l(a.name),1)]),t("td",de,[t("div",ce,[u(K,{href:p.route("admin.permissions.edit",a.id)},null,8,["href"]),u(z,{onClick:h=>p.$emit("delete",a.id)},null,8,["onClick"])])])]))),128))])])):(c(),v("div",me,l(i(r)("noData")),1))])]))}},pe={class:"flex justify-center items-center h-fit sm:mr-4 mt-2 mb-2"},fe={for:"sortParam",class:"hidden lg:block sm:mr-2 tracking-wider text-sm font-semibold text-slate-600 dark:text-slate-100"},ve=["value"],_e={value:"idDesc"},he={value:"idAsc"},ge={value:"name"},xe={__name:"SortSelect",props:{sortParam:String},emits:["update:sortParam"],setup(d,{emit:m}){const{t:r}=T(),p=m,n=a=>{p("update:sortParam",a.target.value)};return(a,h)=>(c(),v("div",pe,[t("label",fe,l(i(r)("sort")),1),t("select",{id:"sortParam",value:d.sortParam,onChange:n,class:"w-44 px-3 py-0.5 form-select bg-white dark:bg-gray-200 text-gray-600 dark:text-gray-900 border border-slate-400 dark:border-slate-600 rounded-sm shadow-sm"},[t("option",_e,l(i(r)("idDesc")),1),t("option",he,l(i(r)("idAsc")),1),t("option",ge,l(i(r)("name")),1)],40,ve)]))}},be={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},ye={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 overflow-hidden shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},we={class:"sm:flex sm:justify-between sm:items-center mb-2"},ke=t("svg",{class:"w-4 h-4 fill-current opacity-50 shrink-0",viewBox:"0 0 16 16"},[t("path",{d:"M15 7H9V1c0-.6-.4-1-1-1S7 .4 7 1v6H1c-.6 0-1 .4-1 1s.4 1 1 1h6v6c0 .6.4 1 1 1s1-.4 1-1V9h6c.6 0 1-.4 1-1s-.4-1-1-1z"})],-1),Pe={key:2,class:"flex justify-between items-center flex-col md:flex-row my-1"},He={__name:"Index",props:["permissions","permissionsCount","adminCountPermissions","adminSortPermissions"],setup(d){const{t:m}=T(),r=U(),p=d,n=f(p.adminCountPermissions);A(n,s=>{P.put(route("admin.settings.updateAdminCountPermissions"),{value:s},{preserveScroll:!0,preserveState:!0,onSuccess:()=>r.info(`Показ ${s} элементов на странице.`),onError:e=>r.error(e.value||"Ошибка обновления кол-ва элементов.")})});const a=f(p.adminSortPermissions);A(a,s=>{P.put(route("admin.settings.updateAdminSortPermissions"),{value:s},{preserveScroll:!0,preserveState:!0,onSuccess:()=>r.info("Сортировка успешно изменена"),onError:e=>r.error(e.value||"Ошибка обновления сортировки.")})});const h=f(!1),g=f(null),x=f(""),V=(s,e)=>{g.value=s,x.value=e,h.value=!0},b=()=>{h.value=!1,g.value=null,x.value=""},B=()=>{if(g.value===null)return;const s=g.value,e=x.value;P.delete(route("admin.permissions.destroy",{permission:s}),{preserveScroll:!0,preserveState:!1,onSuccess:o=>{b(),r.success(`Разрешение "${e||"ID: "+s}" удалено.`)},onError:o=>{b();const E=o.general||o[Object.keys(o)[0]]||"Произошла ошибка при удалении.";r.error(`${E} (Разрешение: ${e||"ID: "+s})`),console.error("Ошибка удаления:",o)},onFinish:()=>{g.value=null,x.value=""}})},w=f(1),y=f(""),N=s=>a.value==="idAsc"?s.slice().sort((e,o)=>e.id-o.id):a.value==="idDesc"?s.slice().sort((e,o)=>o.id-e.id):s.slice().sort((e,o)=>e[a.value]<o[a.value]?-1:e[a.value]>o[a.value]?1:0),k=$(()=>{let s=p.permissions;return y.value&&(s=s.filter(e=>e.name.toLowerCase().includes(y.value.toLowerCase()))),N(s)}),j=$(()=>{const s=(w.value-1)*n.value;return k.value.slice(s,s+n.value)});return $(()=>Math.ceil(k.value.length/n.value)),(s,e)=>(c(),C(F,{title:i(m)("permissions")},{header:_(()=>[u(L,null,{default:_(()=>[D(l(i(m)("permissions")),1)]),_:1})]),default:_(()=>[t("div",be,[t("div",ye,[t("div",we,[u(H,{href:s.route("admin.permissions.create")},{icon:_(()=>[ke]),default:_(()=>[D(" "+l(i(m)("addPermission")),1)]),_:1},8,["href"])]),d.permissionsCount?(c(),C(Q,{key:0,modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),placeholder:i(m)("searchByName")},null,8,["modelValue","placeholder"])):S("",!0),d.permissionsCount?(c(),C(G,{key:1},{default:_(()=>[D(l(d.permissionsCount),1)]),_:1})):S("",!0),u(ue,{permissions:j.value,onDelete:V},null,8,["permissions"]),d.permissionsCount?(c(),v("div",Pe,[u(q,{"items-per-page":n.value,"onUpdate:itemsPerPage":e[1]||(e[1]=o=>n.value=o)},null,8,["items-per-page"]),u(J,{"current-page":w.value,"items-per-page":n.value,"total-items":k.value.length,"onUpdate:currentPage":e[2]||(e[2]=o=>w.value=o),"onUpdate:itemsPerPage":e[3]||(e[3]=o=>n.value=o)},null,8,["current-page","items-per-page","total-items"]),u(xe,{sortParam:a.value,"onUpdate:sortParam":e[4]||(e[4]=o=>a.value=o)},null,8,["sortParam"])])):S("",!0)])]),u(O,{show:h.value,onClose:b,onCancel:b,onConfirm:B,cancelText:i(m)("cancel"),confirmText:i(m)("yesDelete")},null,8,["show","cancelText","confirmText"])]),_:1},8,["title"]))}};export{He as default};
