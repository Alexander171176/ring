import{u as V,m as $,o as x,f as e,t as r,k as o,l as f,C as B,i as u,x as F,w as g,D as L,y as J,E as S,G as T,e as Z,n as z,p as M}from"./vendor-KLnQVH-z.js";import{A as G}from"./AdminLayout-z7Wfz78C.js";import{T as K}from"./TitlePage-HHpS4KcH.js";import{_ as Q}from"./DefaultButton-mNfyXOKI.js";import{_ as q,a as R,b as W}from"./SearchInput-BkQ24b52.js";import{_ as X}from"./ActivityToggle-BMpL71vi.js";import{_ as Y}from"./IconEdit-BSiKqtPt.js";import{_ as ee,a as te,b as se}from"./CountTable-BG0LS_kA.js";import{a as ae}from"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-p73LerAr.js";import"./ScrollButtons-DSzaeyXm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-GNuCPEap.js";import"./LocaleSelectOption-CZ3NaanB.js";import"./app-Ddukg_cY.js";import"./auth-image-XbvYdkSi.js";const le={class:"flex justify-center items-center h-fit sm:mr-4 mt-2 mb-2"},oe={for:"sortParam",class:"hidden lg:block sm:mr-2 tracking-wider text-sm font-semibold text-slate-600 dark:text-slate-100"},re=["value"],ie={value:"idDesc"},ne={value:"idAsc"},ce={value:"sort"},de={value:"category"},ue={value:"type"},pe={value:"option"},me={value:"activity"},he={value:"inactive"},ve={__name:"SortSelect",props:{sortParam:String},emits:["update:sortParam"],setup(v,{emit:m}){const{t:a}=V(),_=m,c=i=>{_("update:sortParam",i.target.value)};return(i,y)=>(x(),$("div",le,[e("label",oe,r(o(a)("sort")),1),e("select",{id:"sortParam",value:v.sortParam,onChange:c,class:"w-44 px-3 py-0.5 form-select bg-white dark:bg-gray-200 text-gray-600 dark:text-gray-900 border border-slate-400 dark:border-slate-600 rounded-sm shadow-sm"},[e("option",ie,r(o(a)("idDesc")),1),e("option",ne,r(o(a)("idAsc")),1),e("option",ce,r(o(a)("sortNumber")),1),e("option",de,r(o(a)("category")),1),e("option",ue,r(o(a)("type")),1),e("option",pe,r(o(a)("parameter")),1),e("option",me,r(o(a)("active")),1),e("option",he,r(o(a)("inactive")),1)],40,re)]))}},_e={class:"flex flex-col sm:flex-row items-center"},fe={class:"block mb-2 sm:mb-0 sm:mr-2 font-semibold text-sm text-slate-700 dark:text-slate-500"},ge={value:"",disabled:"",selected:""},xe={value:"selectAll"},ye={value:"deselectAll"},be={value:"activate"},we={value:"deactivate"},Se={__name:"BulkActionSelect",props:{handleBulkAction:Function},emits:["change"],setup(v,{emit:m}){const{t:a}=V();return(_,c)=>(x(),$("div",_e,[e("label",fe,r(o(a)("bulkActions")),1),e("select",{class:"w-auto px-3 py-0.5 form-select bg-white dark:bg-gray-200 text-gray-600 dark:text-gray-900 border border-slate-400 dark:border-slate-600 rounded-sm shadow-sm",onChange:c[0]||(c[0]=i=>_.$emit("change",i))},[e("option",ge,r(o(a)("selectAction")),1),e("option",xe,r(o(a)("selectAll")),1),e("option",ye,r(o(a)("deselectAll")),1),e("option",be,r(o(a)("activate")),1),e("option",we,r(o(a)("deactivate")),1)],32)]))}},ke={class:"bg-white dark:bg-slate-700 rounded-md shadow-md border"},$e={class:"overflow-x-auto"},Ae={key:0,class:"table-auto w-full text-sm"},Ce={class:"text-sm uppercase bg-slate-200 dark:bg-cyan-900 border border-solid border-gray-300 dark:border-gray-700"},Ve={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap w-px"},De={class:"font-medium text-center"},Pe=["title"],Te=F('<svg class="shrink-0 h-5 w-5" viewBox="0 0 24 24"><path class="fill-current text-blue-600" d="M10,7H2A1,1,0,0,1,1,6V2A1,1,0,0,1,2,1h8a1,1,0,0,1,1,1V6A1,1,0,0,1,10,7Z"></path><path class="fill-current text-blue-600" d="M10,23H2a1,1,0,0,1-1-1V18a1,1,0,0,1,1-1h8a1,1,0,0,1,1,1v4A1,1,0,0,1,10,23Z"></path><rect class="fill-current text-sky-500" x="5" y="8" width="2" height="8"></rect><path class="fill-current text-sky-500" d="M19,7H17V5H12V3h6a1,1,0,0,1,1,1Z"></path><path class="fill-current text-sky-500" d="M18,21H12V19h5V17h2v3A1,1,0,0,1,18,21Z"></path><path class="fill-current text-violet-500" d="M18,16a1,1,0,0,1-.515-.143l-5-3a1,1,0,0,1,0-1.714l5-3a1,1,0,0,1,1.03,0l5,3a1,1,0,0,1,0,1.714l-5,3A1,1,0,0,1,18,16Z"></path></svg>',1),Me=[Te],Be=["title"],He=e("svg",{class:"shrink-0 h-5 w-5",viewBox:"0 0 24 24"},[e("path",{class:"fill-current text-sky-500",d:"M23.57,10.005l-2.907-.415c-.197-.71-.476-1.385-.831-2.014l1.76-2.348c.148-.199,.129-.478-.047-.653l-2.121-2.121c-.176-.176-.456-.194-.653-.047l-2.348,1.76c-.628-.356-1.303-.634-2.014-.831l-.415-2.907c-.035-.247-.246-.43-.495-.43h-3c-.249,0-.46,.183-.495,.43l-.415,2.907c-.71,.197-1.385,.476-2.014,.831l-2.348-1.76c-.197-.147-.478-.129-.653,.047l-2.121,2.121c-.176,.176-.195,.454-.047,.653l1.76,2.348c-.356,.628-.634,1.303-.831,2.014l-2.907,.415c-.247,.035-.43,.246-.43,.495v3c0,.249,.183,.46,.43,.495l2.907,.415c.197,.71,.476,1.385,.831,2.014l-1.76,2.348c-.148,.199-.129,.478,.047,.653l2.121,2.121c.097,.097,.225,.146,.354,.146,.105,0,.211-.033,.3-.1l2.348-1.76c.628,.356,1.303,.634,2.014,.831l.415,2.907c.035,.247,.246,.43,.495,.43h3c.249,0,.46-.183,.495-.43l.415-2.907c.71-.197,1.385-.476,2.014-.831l2.348,1.76c.089,.066,.194,.1,.3,.1,.129,0,.257-.05,.354-.146l2.121-2.121c.176-.176,.195-.454,.047-.653l-1.76-2.348c.356-.628,.634-1.303,.831-2.014l2.907-.415c.247-.035,.43-.246,.43-.495v-3c0-.249-.183-.46-.43-.495Zm-11.57,5.995c-2.209,0-4-1.791-4-4s1.791-4,4-4,4,1.791,4,4-1.791,4-4,4Z",fill:"#212121"})],-1),Ze=[He],Ee=["title"],Ne=e("svg",{class:"shrink-0 h-5 w-5",viewBox:"0 0 24 24"},[e("path",{class:"fill-current text-blue-600",d:"M23.746,16.564l-1.62-.915-8.9,5.028a2.5,2.5,0,0,1-2.459,0l-8.9-5.029-1.62.915a.5.5,0,0,0,0,.872l11.5,6.5a.5.5,0,0,0,.492,0l11.5-6.5a.5.5,0,0,0,0-.872Z",fill:"#212121"}),e("path",{class:"fill-current text-blue-600",d:"M23.746,11.564l-1.62-.915-8.9,5.028a2.5,2.5,0,0,1-2.459,0l-8.9-5.029-1.62.915a.5.5,0,0,0,0,.872l11.5,6.5a.5.5,0,0,0,.492,0l11.5-6.5a.5.5,0,0,0,0-.872Z",fill:"#212121"}),e("path",{class:"fill-current text-sky-500",d:"M23.746,6.564l-11.5-6.5a.507.507,0,0,0-.492,0l-11.5,6.5a.5.5,0,0,0,0,.872l11.5,6.5a.5.5,0,0,0,.492,0l11.5-6.5a.5.5,0,0,0,0-.872Z",fill:"#212121"})],-1),Ie=[Ne],Ue=["title"],Oe=e("svg",{class:"shrink-0 h-5 w-5",viewBox:"0 0 24 24"},[e("path",{class:"fill-current text-sky-500",d:"M14,0H3A1,1,0,0,0,2,1V23a1,1,0,0,0,1,1H21a1,1,0,0,0,1-1V8H15a1,1,0,0,1-1-1ZM5.5,17h13a.5.5,0,0,1,.5.5v1a.5.5,0,0,1-.5.5H5.5a.5.5,0,0,1-.5-.5v-1A.5.5,0,0,1,5.5,17Zm0-5h13a.5.5,0,0,1,.5.5v1a.5.5,0,0,1-.5.5H5.5a.5.5,0,0,1-.5-.5v-1A.5.5,0,0,1,5.5,12Zm5-3h-5A.5.5,0,0,1,5,8.5v-1A.5.5,0,0,1,5.5,7h5a.5.5,0,0,1,.5.5v1A.5.5,0,0,1,10.5,9Z"}),e("polygon",{class:"fill-current text-blue-600",points:"21.414 6 16 6 16 0.586 21.414 6"})],-1),je=[Oe],Fe={class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap"},Le={class:"font-medium text-center"},Je={class:"text-sm font-semibold border-b-2 hover:bg-slate-100 dark:hover:bg-cyan-800"},ze={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Ge={class:"text-center"},Ke={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Qe=["title"],qe={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Re={class:"text-left text-sm font-semibold text-teal-500 dark:text-teal-200"},We={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},Xe={class:"text-center py-0.5 px-2 badge bg-blue-500 rounded-sm text-xs text-slate-100"},Ye={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},et={class:"text-left text-xs"},tt={class:"px-2 first:pl-5 last:pr-5 py-1 whitespace-nowrap"},st={class:"flex justify-center space-x-2"},at=["checked","onChange"],lt={key:1,class:"p-5 text-center text-slate-700 dark:text-slate-100"},ot={__name:"ParameterTable",props:{settings:Array,selectedSettings:Array},emits:["toggle-activity","delete","update-sort-order","toggle-select","toggle-all"],setup(v,{emit:m}){const{t:a}=V(),_=v,c=m,i=f([]);B(()=>_.settings,p=>{i.value=JSON.parse(JSON.stringify(p||[]))},{immediate:!0,deep:!0});const y=()=>{const p=i.value.map(h=>h.id);c("update-sort-order",p)},b=p=>{const h=p.target.checked,n=i.value.map(w=>w.id);c("toggle-all",{ids:n,checked:h})};return(p,h)=>(x(),$("div",ke,[e("div",$e,[v.settings.length?(x(),$("table",Ae,[e("thead",Ce,[e("tr",null,[e("th",Ve,[e("div",De,r(o(a)("id")),1)]),e("th",{class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",title:o(a)("parameter")},Me,8,Pe),e("th",{class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",title:o(a)("value")},Ze,8,Be),e("th",{class:"flex justify-center px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",title:o(a)("category")},Ie,8,Ee),e("th",{class:"px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap",title:o(a)("description")},je,8,Ue),e("th",Fe,[e("div",Le,r(o(a)("actions")),1)]),e("th",null,[e("input",{type:"checkbox",onChange:b},null,32)])])]),u(o(L),{tag:"tbody",modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=n=>i.value=n),onEnd:y,itemKey:"id"},{item:g(({element:n})=>[e("tr",Je,[e("td",ze,[e("div",Ge,r(n.id),1)]),e("td",Ke,[e("div",{class:"text-left text-sm font-semibold text-orange-400 dark:text-orange-200",title:n.type},r(n.option),9,Qe)]),e("td",qe,[e("div",Re,r(n.value),1)]),e("td",We,[e("div",Xe,r(n.category),1)]),e("td",Ye,[e("div",et,r(n.description),1)]),e("td",tt,[e("div",st,[u(X,{isActive:n.activity,onToggleActivity:w=>p.$emit("toggle-activity",n)},null,8,["isActive","onToggleActivity"]),u(Y,{href:p.route("admin.parameters.edit",n.id)},null,8,["href"]),u(ee,{onDelete:w=>p.$emit("delete",n.id)},null,8,["onDelete"])])]),e("td",null,[e("input",{type:"checkbox",checked:v.selectedSettings.includes(n.id),onChange:w=>p.$emit("toggle-select",n.id)},null,40,at)])])]),_:1},8,["modelValue"])])):(x(),$("div",lt,r(o(a)("noData")),1))])]))}},rt={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},it={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg"},nt={class:"sm:flex sm:justify-between sm:items-center mb-2"},ct=e("svg",{class:"w-4 h-4 fill-current opacity-50 shrink-0",viewBox:"0 0 16 16"},[e("path",{d:"M15 7H9V1c0-.6-.4-1-1-1S7 .4 7 1v6H1c-.6 0-1 .4-1 1s.4 1 1 1h6v6c0 .6.4 1 1 1s1-.4 1-1V9h6c.6 0 1-.4 1-1s-.4-1-1-1z"})],-1),dt={class:"flex justify-between items-center flex-col md:flex-row mt-4"},Ct={__name:"Index",props:{settings:Array,settingsCount:Number,adminCountSettings:Number,adminSortSettings:String},setup(v){const{t:m}=V(),a=J(),_=v,c=f(_.adminCountSettings);B(c,t=>{S.put(route("admin.settings.updateAdminCountSettings"),{value:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>a.info(`Показ ${t} элементов на странице.`),onError:s=>a.error(s.value||"Ошибка обновления кол-ва элементов.")})});const i=f(_.adminSortSettings);B(i,t=>{S.put(route("admin.settings.updateAdminSortSettings"),{value:t},{preserveScroll:!0,preserveState:!0,onSuccess:()=>a.info("Сортировка успешно изменена"),onError:s=>a.error(s.value||"Ошибка обновления сортировки.")})});const y=f(!1),b=f(null),p=t=>{b.value=t,y.value=!0},h=()=>{y.value=!1},n=()=>{if(b.value===null)return;const t=b.value;S.delete(route("admin.settings.destroy",{setting:t}),{preserveScroll:!0,preserveState:!1,onSuccess:()=>{h(),a.success(`Параметр ID ${t} успешно удалён.`)},onError:s=>{h();const l=s.general||"Ошибка удаления параметра.";a.error(`${l} (ID: ${t})`)},onFinish:()=>{b.value=null}})},w=t=>{const s=!t.activity;S.put(route("admin.actions.settings.updateActivity",{setting:t.id}),{activity:s},{preserveScroll:!0,preserveState:!0,onSuccess:l=>{l.props.flash.success?a.success(l.props.flash.success):l.props.flash.warning?a.warning(l.props.flash.warning):l.props.flash.error||l.props.flash.general?a.error(l.props.flash.error||l.props.flash.general):a.info(`Изменение активности параметра "${t.option}" (ID: ${t.id}) выполнено.`)},onError:l=>{a.error(l.activity||l.general||`Ошибка изменения активности параметра "${t.option}" (ID: ${t.id}).`)}})},A=f(1),C=f(""),E=t=>i.value==="idAsc"?t.slice().sort((s,l)=>s.id-l.id):i.value==="idDesc"?t.slice().sort((s,l)=>l.id-s.id):i.value==="activity"?t.filter(s=>s.activity):i.value==="inactive"?t.filter(s=>!s.activity):t.slice().sort((s,l)=>s[i.value]<l[i.value]?-1:s[i.value]>l[i.value]?1:0),D=T(()=>{let t=_.settings;return C.value&&(t=t.filter(s=>s.option.toLowerCase().includes(C.value.toLowerCase()))),E(t)}),P=T(()=>{const t=(A.value-1)*c.value;return D.value.slice(t,t+c.value)});T(()=>Math.ceil(D.value.length/c.value));const N=t=>{const s=(A.value-1)*c.value,l=t.map((k,j)=>({id:k,sort:s+j+1}));S.put(route("admin.actions.settings.updateSortBulk"),{settings:l},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{a.success("Порядок статей успешно обновлен.")},onError:k=>{console.error("Ошибка обновления сортировки:",k),a.error(k.general||k.settings||"Не удалось обновить порядок статей."),S.reload({only:["settings"],preserveScroll:!0})}})},d=f([]),I=({ids:t,checked:s})=>{s?d.value=[...new Set([...d.value,...t])]:d.value=d.value.filter(l=>!t.includes(l))},U=t=>{const s=d.value.indexOf(t);s>-1?d.value.splice(s,1):d.value.push(t)},H=t=>{if(!d.value.length){a.warning("Выберите параметры для активации/деактивации");return}ae.put(route("admin.actions.settings.bulkUpdateActivity"),{ids:d.value,activity:t}).then(()=>{a.success("Активность парметров массово обновлена");const s=[...d.value];d.value=[],P.value.forEach(l=>{s.includes(l.id)&&(l.activity=t)})}).catch(()=>{a.error("Не удалось обновить активность параметров")})},O=t=>{const s=t.target.value;s==="selectAll"?d.value=P.value.map(l=>l.id):s==="deselectAll"?d.value=[]:s==="activate"?H(!0):s==="deactivate"&&H(!1),t.target.value=""};return(t,s)=>(x(),Z(G,{title:o(m)("parametersHeader")},{header:g(()=>[u(K,null,{default:g(()=>[M(r(o(m)("parametersHeader")),1)]),_:1})]),default:g(()=>[e("div",rt,[e("div",it,[e("div",nt,[u(Q,{href:t.route("admin.parameters.create")},{icon:g(()=>[ct]),default:g(()=>[M(" "+r(o(m)("addParameter")),1)]),_:1},8,["href"]),v.settingsCount?(x(),Z(Se,{key:0,onChange:O})):z("",!0)]),u(q,{modelValue:C.value,"onUpdate:modelValue":s[0]||(s[0]=l=>C.value=l),placeholder:o(m)("searchByParameter")},null,8,["modelValue","placeholder"]),u(te,null,{default:g(()=>[M(r(v.settingsCount),1)]),_:1}),u(ot,{settings:P.value,"selected-settings":d.value,onToggleActivity:w,onUpdateSortOrder:N,onDelete:p,onToggleSelect:U,onToggleAll:I},null,8,["settings","selected-settings"]),e("div",dt,[u(R,{"items-per-page":c.value,"onUpdate:itemsPerPage":s[1]||(s[1]=l=>c.value=l)},null,8,["items-per-page"]),u(W,{"current-page":A.value,"items-per-page":c.value,"total-items":D.value.length,"onUpdate:currentPage":s[2]||(s[2]=l=>A.value=l)},null,8,["current-page","items-per-page","total-items"]),u(ve,{sortParam:i.value,"onUpdate:sortParam":s[3]||(s[3]=l=>i.value=l)},null,8,["sortParam"])])])]),u(se,{show:y.value,onClose:h,onCancel:h,onConfirm:n,cancelText:o(m)("cancel"),confirmText:o(m)("yesDelete")},null,8,["show","cancelText","confirmText"])]),_:1},8,["title"]))}};export{Ct as default};
