import{l as V,C as I,m as y,o as w,i as t,n as C,f as l,y as D,u as M,T as N,G as S,z as T,e as z,w as u,p as g,t as d,k as e,A as E,q}from"./vendor-RLSRVg0u.js";import{A as L}from"./AdminLayout-CQp87BGR.js";import{T as O}from"./TitlePage-FZyLO7ZL.js";import{_ as k}from"./DefaultButton-nL57tpOx.js";import{_ as c,a as x,b as F}from"./InputText-5Caei78W.js";import{_ as m}from"./InputError-BqCCjfzi.js";import{_ as P}from"./MetaDescTextarea-B3siJ_Tv.js";import{_ as R,a as G,b as f}from"./InputNumber-Bsw9q1AF.js";import{_ as H,a as U}from"./TinyEditor-DOzkpf8x.js";import{_ as K}from"./MultiImageUpload-BayZJNZL.js";import{_ as J}from"./MultiImageEdit-BcQMX9X_.js";import{_ as Q}from"./StanceSelect-CwfjDUFK.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-xl9ghVBF.js";import"./ScrollButtons-Bf8O8t11.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationMark-xXghvFch.js";import"./ResponsiveNavLink-BMppKKTO.js";import"./LocaleSelectOption-C-b8LGFO.js";import"./app-DA3r2JAX.js";import"./auth-image-XbvYdkSi.js";const W={class:"mb-3 flex flex-col items-start"},X={key:0,class:"mb-2"},Y=["src"],Z={key:1,class:"mb-2"},ee=["src"],se={__name:"AvatarEditUpload",props:{modelValue:File,currentAvatar:{type:String,default:null},error:{type:String,default:""}},emits:["update:modelValue"],setup(h,{emit:v}){const i=h,r=v,s=V(null);I(()=>i.modelValue,_=>{_ instanceof File?s.value=URL.createObjectURL(_):s.value=null},{immediate:!0});const b=_=>{const p=_.target.files[0];r("update:modelValue",p)};return(_,p)=>(w(),y("div",W,[t(c,{for:"avatar-upload",value:"Avatar"}),s.value?(w(),y("div",X,[l("img",{src:s.value,alt:"Preview",class:"w-32 h-32 object-cover rounded border border-gray-300 dark:border-gray-600"},null,8,Y)])):h.currentAvatar?(w(),y("div",Z,[l("img",{src:`/storage/${h.currentAvatar}`,alt:"Current Avatar",class:"w-32 h-32 object-cover rounded border border-gray-300 dark:border-gray-600"},null,8,ee)])):C("",!0),l("input",{id:"avatar-upload",type:"file",accept:"image/png",onChange:b,class:"mt-1 text-sm text-gray-700 dark:text-gray-300"},null,32),t(m,{class:"mt-2",message:h.error},null,8,["message"])]))}},te={class:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-12xl mx-auto"},le={class:"p-4 bg-slate-50 dark:bg-slate-700 border border-blue-400 dark:border-blue-200 shadow-lg shadow-gray-500 dark:shadow-slate-400 bg-opacity-95 dark:bg-opacity-95"},ae={class:"sm:flex sm:justify-between sm:items-center mb-2"},oe=l("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[l("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),ie=l("div",{class:"grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2"},null,-1),re={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ne={class:"flex flex-row items-center gap-2"},me={class:"flex flex-row items-center gap-2 w-auto"},de={class:"flex flex-row items-center gap-2"},ce={class:"h-8 flex items-center"},ue={class:"mb-3 flex flex-col items-start"},_e={class:"flex justify-between w-full"},fe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ge={class:"mb-3 flex flex-col items-start"},he={class:"flex justify-between w-full"},pe=l("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),xe={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},ve={class:"mb-3 flex flex-col items-start"},we={class:"flex justify-between w-full"},be=l("span",{class:"text-red-500 dark:text-red-300 font-semibold"},"*",-1),ye={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ve={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},ke={class:"mt-3 flex flex-col items-start w-full"},Ue={class:"flex justify-start w-full"},$e={class:"flex flex-row items-center justify-end w-full"},je={class:"mb-3 flex flex-col items-end w-96"},Be={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},Ae={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},Ie={class:"flex flex-row items-center gap-2"},Ce={class:"h-8 flex items-center"},De={class:"flex flex-row items-center gap-2"},Me={class:"h-8 flex items-center"},Ne={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},Se={class:"flex flex-row items-center gap-2"},Te={class:"h-8 flex items-center"},ze={class:"flex flex-row items-center gap-2"},Ee={class:"h-8 flex items-center"},qe={class:"flex flex-row items-center gap-2"},Le={class:"h-8 flex items-center"},Oe={class:"mb-3 flex justify-between flex-col lg:flex-row items-center gap-4"},Fe={class:"flex flex-row items-center gap-2"},Pe={class:"h-8 flex items-center"},Re={class:"flex flex-row items-center gap-2"},Ge={class:"h-8 flex items-center"},He={class:"flex flex-row items-center gap-2"},Ke={class:"h-8 flex items-center"},Je={class:"flex flex-row items-center gap-2"},Qe={class:"h-8 flex items-center"},We={class:"mb-3 flex flex-col items-start"},Xe={class:"mb-3 flex flex-col items-start"},Ye={class:"flex justify-between w-full"},Ze={class:"text-md text-gray-900 dark:text-gray-400 mt-1"},es={class:"mb-3 flex flex-col items-start"},ss={class:"mt-4"},ts={class:"mt-4"},ls={class:"flex items-center justify-center mt-4"},as=l("svg",{class:"w-4 h-4 fill-current text-slate-100 shrink-0 mr-2",viewBox:"0 0 16 16"},[l("path",{d:"M4.3 4.5c1.9-1.9 5.1-1.9 7 0 .7.7 1.2 1.7 1.4 2.7l2-.3c-.2-1.5-.9-2.8-1.9-3.8C10.1.4 5.7.4 2.9 3.1L.7.9 0 7.3l6.4-.7-2.1-2.1zM15.6 8.7l-6.4.7 2.1 2.1c-1.9 1.9-5.1 1.9-7 0-.7-.7-1.2-1.7-1.4-2.7l-2 .3c.2 1.5.9 2.8 1.9 3.8 1.4 1.4 3.1 2 4.9 2 1.8 0 3.6-.7 4.9-2l2.2 2.2.8-6.4z"})],-1),os=l("svg",{class:"w-4 h-4 fill-current text-slate-100",viewBox:"0 0 16 16"},[l("path",{d:"M14.3 2.3L5 11.6 1.7 8.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l4 4c.2.2.4.3.7.3.3 0 .5-.1.7-.3l10-10c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0z"})],-1),js={__name:"Edit",props:{athlete:{type:Object,required:!0}},setup(h){const v=D(),{t:i}=M(),r=h,s=N({_method:"PUT",sort:r.athlete.sort??0,locale:r.athlete.locale??"",nickname:r.athlete.nickname??"",first_name:r.athlete.first_name??"",last_name:r.athlete.last_name??"",date_of_birth:r.athlete.date_of_birth??"",nationality:r.athlete.nationality??"",height_cm:r.athlete.height_cm??0,reach_cm:r.athlete.reach_cm??0,stance:r.athlete.stance??null,bio:r.athlete.bio??"",short:r.athlete.short??"",description:r.athlete.description??"",wins:r.athlete.wins??0,losses:r.athlete.losses??0,draws:r.athlete.draws??0,no_contests:r.athlete.no_contests??0,wins_by_ko:r.athlete.wins_by_ko??0,wins_by_submission:r.athlete.wins_by_submission??0,wins_by_decision:r.athlete.wins_by_decision??0,activity:!!r.athlete.activity,avatar:null,deletedImages:[]});S(()=>r.athlete.avatar?`/storage/${r.athlete.avatar}`:null);const b=n=>{if(!n)return"";const a=new Date(n);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]};T(()=>{s.date_of_birth&&(s.date_of_birth=b(s.date_of_birth))});const _=V((r.athlete.images||[]).filter(n=>n.url).map(n=>({id:n.id,url:n.webp_url||n.url,order:n.order||0,alt:n.alt||"",caption:n.caption||""}))),p=V([]),$=n=>{_.value=n},j=n=>{s.deletedImages.includes(n)||s.deletedImages.push(n),_.value=_.value.filter(a=>a.id!==n)},B=n=>{p.value=n},A=()=>{s.transform(n=>({...n,activity:n.activity?1:0,images:[...p.value.map(a=>({file:a.file,order:a.order,alt:a.alt,caption:a.caption})),..._.value.map(a=>({id:a.id,order:a.order,alt:a.alt,caption:a.caption}))],deletedImages:s.deletedImages})),s.post(route("admin.athletes.update",r.athlete.id),{forceFormData:!0,errorBag:"editAthlete",preserveScroll:!0,onSuccess:()=>{v.success("Спортсмен успешно обновлён!")},onError:n=>{console.error("❌ Ошибки валидации:",n);const a=n[Object.keys(n)[0]];v.error(a||"Пожалуйста, проверьте правильность заполнения полей.")}})};return(n,a)=>(w(),z(L,{title:e(i)("editAthlete")},{header:u(()=>[t(O,null,{default:u(()=>[g(d(e(i)("editAthlete"))+" ID:"+d(r.athlete.id),1)]),_:1})]),default:u(()=>[l("div",te,[l("div",le,[l("div",ae,[t(k,{href:n.route("admin.athletes.index")},{icon:u(()=>[oe]),default:u(()=>[g(" "+d(e(i)("back")),1)]),_:1},8,["href"]),ie]),l("form",{onSubmit:E(A,["prevent"]),enctype:"multipart/form-data",class:"p-3 w-full"},[l("div",re,[l("div",ne,[t(R,{modelValue:e(s).activity,"onUpdate:modelValue":a[0]||(a[0]=o=>e(s).activity=o)},null,8,["modelValue"]),t(G,{for:"activity",text:e(i)("activity"),class:"text-sm h-8 flex items-center"},null,8,["text"])]),l("div",me,[t(H,{modelValue:e(s).locale,"onUpdate:modelValue":a[1]||(a[1]=o=>e(s).locale=o),errorMessage:e(s).errors.locale},null,8,["modelValue","errorMessage"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.locale},null,8,["message"])]),l("div",de,[l("div",ce,[t(c,{for:"sort",value:e(i)("sort"),class:"text-sm"},null,8,["value"])]),t(f,{id:"sort",type:"number",modelValue:e(s).sort,"onUpdate:modelValue":a[2]||(a[2]=o=>e(s).sort=o),autocomplete:"sort",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.sort},null,8,["message"])])]),l("div",ue,[l("div",_e,[t(c,{for:"nickname"},{default:u(()=>[g(d(e(i)("nickname")),1)]),_:1}),l("div",fe,d(e(s).nickname.length)+" / 100 "+d(e(i)("characters")),1)]),t(x,{id:"nickname",type:"text",modelValue:e(s).nickname,"onUpdate:modelValue":a[3]||(a[3]=o=>e(s).nickname=o),maxlength:"100",required:"",autocomplete:"nickname"},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.nickname},null,8,["message"])]),l("div",ge,[l("div",he,[t(c,{for:"first_name"},{default:u(()=>[pe,g(" "+d(e(i)("name")),1)]),_:1}),l("div",xe,d(e(s).first_name.length)+" / 100 "+d(e(i)("characters")),1)]),t(x,{id:"first_name",type:"text",modelValue:e(s).first_name,"onUpdate:modelValue":a[4]||(a[4]=o=>e(s).first_name=o),maxlength:"100",required:"",autocomplete:"first_name"},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.first_name},null,8,["message"])]),l("div",ve,[l("div",we,[t(c,{for:"last_name"},{default:u(()=>[be,g(" "+d(e(i)("lastName")),1)]),_:1}),l("div",ye,d(e(s).last_name.length)+" / 100 "+d(e(i)("characters")),1)]),t(x,{id:"last_name",type:"text",modelValue:e(s).last_name,"onUpdate:modelValue":a[5]||(a[5]=o=>e(s).last_name=o),maxlength:"100",required:"",autocomplete:"last_name"},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.last_name},null,8,["message"])]),l("div",Ve,[l("div",ke,[l("div",Ue,[t(c,{for:"date_of_birth",value:e(i)("dateBirth"),class:"mb-1 lg:mb-0 lg:mr-2"},null,8,["value"]),t(x,{id:"date_of_birth",type:"date",modelValue:e(s).date_of_birth,"onUpdate:modelValue":a[6]||(a[6]=o=>e(s).date_of_birth=o),autocomplete:"date_of_birth",class:"w-full max-w-56"},null,8,["modelValue"]),t(m,{class:"mt-1 sm:mt-0",message:e(s).errors.date_of_birth},null,8,["message"])])]),l("div",$e,[t(c,{for:"nationality",class:"mt-4 mr-2"},{default:u(()=>[g(d(e(i)("country")),1)]),_:1}),l("div",je,[l("div",Be,d(e(s).nationality.length)+" / 100 "+d(e(i)("characters")),1),t(x,{id:"nationality",type:"text",modelValue:e(s).nationality,"onUpdate:modelValue":a[7]||(a[7]=o=>e(s).nationality=o),maxlength:"100",required:"",autocomplete:"nationality"},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.nationality},null,8,["message"])])])]),l("div",Ae,[t(Q,{modelValue:e(s).stance,"onUpdate:modelValue":a[8]||(a[8]=o=>e(s).stance=o),error:e(s).errors.stance,class:"mt-3"},null,8,["modelValue","error"]),l("div",Ie,[l("div",Ce,[t(c,{for:"height_cm",value:e(i)("cmHeight"),class:"text-sm"},null,8,["value"])]),t(f,{id:"height_cm",type:"number",modelValue:e(s).height_cm,"onUpdate:modelValue":a[9]||(a[9]=o=>e(s).height_cm=o),autocomplete:"height_cm",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.height_cm},null,8,["message"])]),l("div",De,[l("div",Me,[t(c,{for:"reach_cm",value:e(i)("cmReach"),class:"text-sm"},null,8,["value"])]),t(f,{id:"reach_cm",type:"number",modelValue:e(s).reach_cm,"onUpdate:modelValue":a[10]||(a[10]=o=>e(s).reach_cm=o),autocomplete:"reach_cm",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.reach_cm},null,8,["message"])])]),l("div",Ne,[l("div",Se,[l("div",Te,[t(c,{for:"losses",value:e(i)("losses"),class:"text-sm"},null,8,["value"])]),t(f,{id:"losses",type:"number",modelValue:e(s).losses,"onUpdate:modelValue":a[11]||(a[11]=o=>e(s).losses=o),autocomplete:"losses",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.losses},null,8,["message"])]),l("div",ze,[l("div",Ee,[t(c,{for:"draws",value:e(i)("draws"),class:"text-sm"},null,8,["value"])]),t(f,{id:"draws",type:"number",modelValue:e(s).draws,"onUpdate:modelValue":a[12]||(a[12]=o=>e(s).draws=o),autocomplete:"draws",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.draws},null,8,["message"])]),l("div",qe,[l("div",Le,[t(c,{for:"wins",value:e(i)("wins"),class:"text-sm"},null,8,["value"])]),t(f,{id:"wins",type:"number",modelValue:e(s).wins,"onUpdate:modelValue":a[13]||(a[13]=o=>e(s).wins=o),autocomplete:"wins",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.wins},null,8,["message"])])]),l("div",Oe,[l("div",Fe,[l("div",Pe,[t(c,{for:"wins_by_ko",value:e(i)("winsByKo"),class:"text-sm"},null,8,["value"])]),t(f,{id:"wins_by_ko",type:"number",modelValue:e(s).wins_by_ko,"onUpdate:modelValue":a[14]||(a[14]=o=>e(s).wins_by_ko=o),autocomplete:"wins_by_ko",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.wins_by_ko},null,8,["message"])]),l("div",Re,[l("div",Ge,[t(c,{for:"wins_by_submission",value:e(i)("winsBySubmission"),class:"text-sm"},null,8,["value"])]),t(f,{id:"wins_by_submission",type:"number",modelValue:e(s).wins_by_submission,"onUpdate:modelValue":a[15]||(a[15]=o=>e(s).wins_by_submission=o),autocomplete:"wins_by_submission",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.wins_by_submission},null,8,["message"])]),l("div",He,[l("div",Ke,[t(c,{for:"wins_by_decision",value:e(i)("winsByDecision"),class:"text-sm"},null,8,["value"])]),t(f,{id:"wins_by_decision",type:"number",modelValue:e(s).wins_by_decision,"onUpdate:modelValue":a[16]||(a[16]=o=>e(s).wins_by_decision=o),autocomplete:"wins_by_decision",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.wins_by_decision},null,8,["message"])])]),l("div",Je,[l("div",Qe,[t(c,{for:"no_contests",value:e(i)("noContests"),class:"text-sm"},null,8,["value"])]),t(f,{id:"no_contests",type:"number",modelValue:e(s).no_contests,"onUpdate:modelValue":a[17]||(a[17]=o=>e(s).no_contests=o),autocomplete:"no_contests",class:"w-full lg:w-28"},null,8,["modelValue"]),t(m,{class:"mt-2 lg:mt-0",message:e(s).errors.no_contests},null,8,["message"])]),l("div",We,[t(c,{for:"bio",value:e(i)("bio"),class:"w-full flex justify-center"},null,8,["value"]),t(U,{modelValue:e(s).bio,"onUpdate:modelValue":a[18]||(a[18]=o=>e(s).bio=o),height:500},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.bio},null,8,["message"])]),l("div",Xe,[l("div",Ye,[t(c,{for:"short",value:e(i)("shortDescription")},null,8,["value"]),l("div",Ze,d(e(s).short.length)+" / 255 "+d(e(i)("characters")),1)]),t(P,{modelValue:e(s).short,"onUpdate:modelValue":a[19]||(a[19]=o=>e(s).short=o),class:"w-full"},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.short},null,8,["message"])]),l("div",es,[t(c,{for:"description",value:e(i)("description")},null,8,["value"]),t(U,{modelValue:e(s).description,"onUpdate:modelValue":a[20]||(a[20]=o=>e(s).description=o),height:500},null,8,["modelValue"]),t(m,{class:"mt-2",message:e(s).errors.description},null,8,["message"])]),t(se,{modelValue:e(s).avatar,"onUpdate:modelValue":a[21]||(a[21]=o=>e(s).avatar=o),"current-avatar":r.athlete.avatar,error:e(s).errors.avatar},null,8,["modelValue","current-avatar","error"]),l("div",ss,[t(J,{images:_.value,"onUpdate:images":$,onDeleteImage:j},null,8,["images"])]),l("div",ts,[t(K,{"onUpdate:images":B})]),l("div",ls,[t(k,{href:n.route("admin.athletes.index"),class:"mb-3"},{icon:u(()=>[as]),default:u(()=>[g(" "+d(e(i)("back")),1)]),_:1},8,["href"]),t(F,{class:q(["ms-4",{"opacity-25":e(s).processing}]),disabled:e(s).processing},{icon:u(()=>[os]),default:u(()=>[g(" "+d(e(i)("save")),1)]),_:1},8,["class","disabled"])])],32)])])]),_:1},8,["title"]))}};export{js as default};
