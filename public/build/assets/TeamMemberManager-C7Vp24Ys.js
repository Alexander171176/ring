import{u as J,Q as K,T as x,l as w,m as r,o as i,n as f,i as l,w as o,k as e,p as m,t,q as b,f as a,F as C,v as T,E as W}from"./vendor-KLnQVH-z.js";import{_ as X}from"./ActionMessage-XWUpSUZJ.js";import{_ as F}from"./Modal-1niRuFFt.js";import{_ as z}from"./ConfirmationModal-CeWaOKhC.js";import{_ as P}from"./DangerButton-DgViZh5N.js";import{_ as Y}from"./DialogModal-Cq-pB3s-.js";import{_ as Z}from"./FormSection-BMR3zrS3.js";import{_ as ee,a as V}from"./TextInput-CWxdGy18.js";import{_ as L}from"./InputLabel-as0EZb2n.js";import{_ as D}from"./PrimaryButton-B2GiD6xG.js";import{_ as S}from"./SecondaryButton-tAAUyHPd.js";import{S as j}from"./SectionBorder-BWaFl6qw.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-p73LerAr.js";import"./SectionTitle-Br7o8sGM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={key:0},te={class:"col-span-6"},oe={class:"max-w-xl font-semibold text-lg text-indigo-800 dark:text-slate-300"},ne={class:"col-span-6 sm:col-span-4"},ae={key:0,class:"col-span-6 lg:col-span-4"},le={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},re=["onClick"],ie={class:"flex items-center"},me={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ce=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),de=[ce],ue={class:"mt-2 italic text-lg text-gray-900 dark:text-slate-50 text-start"},ve={key:1},fe={class:"space-y-6"},be={class:"text-gray-600"},_e={class:"flex items-center"},ge=["onClick"],pe={key:2},ye={class:"space-y-6"},ke={class:"flex items-center"},he=["src","alt"],xe={class:"ms-4"},we={class:"flex items-center"},Ce=["onClick"],Te={key:1,class:"ms-2 text-sm text-gray-400"},Me=["onClick"],$e={key:0},Re={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Se=["onClick"],je={class:"flex items-center"},Be={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Fe=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ze=[Fe],Pe={class:"mt-2 text-xs text-gray-600"},Xe={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(c){const{t:n}=J(),y=c,I=K(),u=x({email:"",role:null}),_=x({role:null}),M=x({}),$=x({}),k=w(!1),R=w(null),h=w(!1),p=w(null),N=()=>{u.post(route("team-members.store",y.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>u.reset()})},O=v=>{W.delete(route("team-invitations.destroy",v),{preserveScroll:!0})},A=v=>{R.value=v,_.role=v.membership.role,k.value=!0},E=()=>{_.put(route("team-members.update",[y.team,R.value]),{preserveScroll:!0,onSuccess:()=>k.value=!1})},U=()=>{h.value=!0},q=()=>{M.delete(route("team-members.destroy",[y.team,I.props.auth.user]))},Q=v=>{p.value=v},G=()=>{$.delete(route("team-members.destroy",[y.team,p.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>p.value=null})},B=v=>y.availableRoles.find(d=>d.key===v).name;return(v,d)=>(i(),r("div",null,[c.userPermissions.canAddTeamMembers?(i(),r("div",se,[l(j),l(Z,{onSubmitted:N},{title:o(()=>[m(t(e(n)("addTeamMember")),1)]),description:o(()=>[m(t(e(n)("addTeamMemberDescription")),1)]),form:o(()=>[a("div",te,[a("div",oe,t(e(n)("addTeamMemberEmailPrompt")),1)]),a("div",ne,[l(L,{for:"email",value:e(n)("email")},null,8,["value"]),l(ee,{id:"email",modelValue:e(u).email,"onUpdate:modelValue":d[0]||(d[0]=s=>e(u).email=s),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),l(V,{message:e(u).errors.email,class:"mt-2"},null,8,["message"])]),c.availableRoles.length>0?(i(),r("div",ae,[l(L,{for:"roles",value:e(n)("roles")},null,8,["value"]),l(V,{message:e(u).errors.role,class:"mt-2"},null,8,["message"]),a("div",le,[(i(!0),r(C,null,T(c.availableRoles,(s,g)=>(i(),r("button",{key:s.key,type:"button",class:b(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":g>0,"rounded-b-none":g!=Object.keys(c.availableRoles).length-1}]),onClick:H=>e(u).role=s.key},[a("div",{class:b({"opacity-50":e(u).role&&e(u).role!=s.key})},[a("div",ie,[a("div",{class:b(["font-semibold text-xl text-pink-400",{"font-semibold":e(u).role==s.key}])},t(s.name),3),e(u).role==s.key?(i(),r("svg",me,de)):f("",!0)]),a("div",ue,t(s.description),1)],2)],10,re))),128))])])):f("",!0)]),actions:o(()=>[l(X,{on:e(u).recentlySuccessful,class:"me-3"},{default:o(()=>[m(t(e(n)("added")),1)]),_:1},8,["on"]),l(D,{class:b({"opacity-25":e(u).processing}),disabled:e(u).processing},{default:o(()=>[m(t(e(n)("add")),1)]),_:1},8,["class","disabled"])]),_:1})])):f("",!0),c.team.team_invitations.length>0&&c.userPermissions.canAddTeamMembers?(i(),r("div",ve,[l(j),l(F,{class:"mt-10 sm:mt-0"},{title:o(()=>[m(t(e(n)("pendingInvitations")),1)]),description:o(()=>[m(t(e(n)("pendingInvitationsDescription")),1)]),content:o(()=>[a("div",fe,[(i(!0),r(C,null,T(c.team.team_invitations,s=>(i(),r("div",{key:s.id,class:"flex items-center justify-between"},[a("div",be,t(s.email),1),a("div",_e,[c.userPermissions.canRemoveTeamMembers?(i(),r("button",{key:0,class:"cursor-pointer ms-6 text-sm text-red-500 focus:outline-none",onClick:g=>O(s)},t(e(n)("cancel")),9,ge)):f("",!0)])]))),128))])]),_:1})])):f("",!0),c.team.users.length>0?(i(),r("div",pe,[l(j),l(F,{class:"mt-10 sm:mt-0"},{title:o(()=>[m(t(e(n)("teamMembers")),1)]),description:o(()=>[m(t(e(n)("teamMembersDescription")),1)]),content:o(()=>[a("div",ye,[(i(!0),r(C,null,T(c.team.users,s=>(i(),r("div",{key:s.id,class:"flex items-center justify-between"},[a("div",ke,[a("img",{class:"w-8 h-8 rounded-full object-cover",src:s.profile_photo_url,alt:s.name},null,8,he),a("div",xe,t(s.name),1)]),a("div",we,[c.userPermissions.canUpdateTeamMembers&&c.availableRoles.length?(i(),r("button",{key:0,class:"ms-2 text-sm text-gray-400 underline",onClick:g=>A(s)},t(B(s.membership.role)),9,Ce)):c.availableRoles.length?(i(),r("div",Te,t(B(s.membership.role)),1)):f("",!0),v.$page.props.auth.user.id===s.id?(i(),r("button",{key:2,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:U},t(e(n)("leave")),1)):c.userPermissions.canRemoveTeamMembers?(i(),r("button",{key:3,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:g=>Q(s)},t(e(n)("remove")),9,Me)):f("",!0)])]))),128))])]),_:1})])):f("",!0),l(Y,{show:k.value,onClose:d[2]||(d[2]=s=>k.value=!1)},{title:o(()=>[m(t(e(n)("manageRoles")),1)]),content:o(()=>[R.value?(i(),r("div",$e,[a("div",Re,[(i(!0),r(C,null,T(c.availableRoles,(s,g)=>(i(),r("button",{key:s.key,type:"button",class:b(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":g>0,"rounded-b-none":g!==Object.keys(c.availableRoles).length-1}]),onClick:H=>e(_).role=s.key},[a("div",{class:b({"opacity-50":e(_).role&&e(_).role!==s.key})},[a("div",je,[a("div",{class:b(["text-sm text-gray-600",{"font-semibold":e(_).role===s.key}])},t(s.name),3),e(_).role==s.key?(i(),r("svg",Be,ze)):f("",!0)]),a("div",Pe,t(s.description),1)],2)],10,Se))),128))])])):f("",!0)]),footer:o(()=>[l(S,{onClick:d[1]||(d[1]=s=>k.value=!1)},{default:o(()=>[m(t(e(n)("cancel")),1)]),_:1}),l(D,{class:b(["ms-3",{"opacity-25":e(_).processing}]),disabled:e(_).processing,onClick:E},{default:o(()=>[m(t(e(n)("save")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(z,{show:h.value,onClose:d[4]||(d[4]=s=>h.value=!1)},{title:o(()=>[m(t(e(n)("leaveTeam")),1)]),content:o(()=>[m(t(e(n)("leaveTeamConfirmation")),1)]),footer:o(()=>[l(S,{onClick:d[3]||(d[3]=s=>h.value=!1)},{default:o(()=>[m(t(e(n)("cancel")),1)]),_:1}),l(P,{class:b(["ms-3",{"opacity-25":e(M).processing}]),disabled:e(M).processing,onClick:q},{default:o(()=>[m(t(e(n)("leave")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l(z,{show:p.value,onClose:d[6]||(d[6]=s=>p.value=null)},{title:o(()=>[m(t(e(n)("removeTeamMember")),1)]),content:o(()=>[m(t(e(n)("removeTeamMemberConfirmation")),1)]),footer:o(()=>[l(S,{onClick:d[5]||(d[5]=s=>p.value=null)},{default:o(()=>[m(t(e(n)("cancel")),1)]),_:1}),l(P,{class:b(["ms-3",{"opacity-25":e($).processing}]),disabled:e($).processing,onClick:G},{default:o(()=>[m(t(e(n)("remove")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Xe as default};
