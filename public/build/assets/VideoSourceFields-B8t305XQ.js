import{u as _}from"./app-Bp8GUED0.js";import{_ as m,a as f}from"./InputText-DBtoU87u.js";import{b as h,x as i,G as v,P as r,k as s,u as n,J as g,H as a}from"./vue-DrbZvlgE.js";const I={key:0,class:"w-full mb-3"},k={key:0,class:"mt-2 text-sm text-green-700 dark:text-green-300"},w={key:1,class:"relative pb-[56.25%] h-0 overflow-hidden bg-black mt-4"},U=["src"],C={key:1,class:"w-full mb-3"},$={class:"mb-3 flex flex-col"},S={class:"mb-3 flex flex-col"},F={key:0,class:"mt-2 flex justify-center"},B=["src"],N={key:2,class:"w-full mb-3"},j={class:"mb-3 flex flex-col"},L=["value","placeholder"],D={__name:"VideoSourceFields",props:{modelValue:{type:String,required:!0},videoUrl:{type:String,default:""},externalVideoId:{type:String,default:""},videoFile:{type:Object,default:null},embedCode:{type:String,default:""}},emits:["update:modelValue","update:videoUrl","update:externalVideoId","update:videoFile","update:embedCode"],setup(o,{emit:p}){const{t:u}=_(),d=o,x=p,b=e=>{const l=/(?:youtube\.com\/.*[?&]v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/,t=e.match(l);return t?t[1]:null},y=e=>{const l=/vimeo\.com\/(?:video\/)?(\d+)/,t=e.match(l);return t?t[1]:null},c=h(()=>{if(!d.externalVideoId)return"";if(d.modelValue==="youtube"){const e=b(d.externalVideoId);return e?`https://www.youtube.com/embed/${e}`:""}if(d.modelValue==="vimeo"){const e=y(d.externalVideoId);return e?`https://player.vimeo.com/video/${e}`:""}return""}),V=e=>{const l=e.target.files[0];x("update:videoFile",l)};return(e,l)=>o.modelValue==="youtube"||o.modelValue==="vimeo"?(r(),i("div",I,[s(m,{for:"external_video_url",value:n(u)("externalVideoId")},null,8,["value"]),s(f,{id:"external_video_url",type:"text",modelValue:o.externalVideoId,onInput:l[0]||(l[0]=t=>e.$emit("update:externalVideoId",t.target.value)),autocomplete:"external_video_url",placeholder:n(u)("videoLinkInsert")},null,8,["modelValue","placeholder"]),c.value?(r(),i("div",k,g(c.value),1)):v("",!0),c.value?(r(),i("div",w,[a("iframe",{src:c.value,class:"absolute top-0 left-0 w-full h-full border-0",allow:"autoplay; fullscreen; picture-in-picture"},null,8,U)])):v("",!0)])):o.modelValue==="local"?(r(),i("div",C,[a("div",$,[s(m,{for:"video_file",value:n(u)("uploadVideo")},null,8,["value"]),a("input",{id:"video_file",type:"file",onChange:V,class:"bg-slate-100 dark:bg-slate-300 text-gray-900 dark:text-gray-700 px-3 py-0.5"},null,32)]),a("div",S,[s(m,{for:"video_url",value:n(u)("videoUrl")},null,8,["value"]),s(f,{id:"video_url",type:"text",modelValue:o.videoUrl,onInput:l[1]||(l[1]=t=>e.$emit("update:videoUrl",t.target.value)),autocomplete:"video_url",placeholder:"Введите URL локального видео (если требуется)"},null,8,["modelValue"])]),d.videoUrl?(r(),i("div",F,[a("video",{controls:"",src:d.videoUrl,class:"max-w-full rounded-sm shadow"},null,8,B)])):v("",!0)])):o.modelValue==="code"?(r(),i("div",N,[a("div",j,[s(m,{for:"video_code",value:n(u)("videoCode")},null,8,["value"]),a("textarea",{value:o.embedCode,onInput:l[2]||(l[2]=t=>e.$emit("update:embedCode",t.target.value)),class:"h-80 form-textarea …",placeholder:n(u)("videoCodeInsert")},null,40,L)])])):v("",!0)}};export{D as _};
