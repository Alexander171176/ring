import{T as j,l as v,u as D,e as S,o as f,w as l,i as s,k as e,p as i,t as r,q as F,m as I,n as _,f as n,I as h,L as g,K as L,A as k,J as q,E as T}from"./vendor-KLnQVH-z.js";import{_ as z}from"./ActionMessage-XWUpSUZJ.js";import{_ as A}from"./FormSection-AjmXTgQ0.js";import{a as y,_ as $}from"./TextInput-C984JDA8.js";import{_ as w}from"./InputLabel-CjO4B4vR.js";import{_ as R}from"./PrimaryButton-BFHjGhkz.js";import{_ as x}from"./SecondaryButton-CdnzkSsd.js";import"./vendor-axios-jn5v1YEJ.js";import"./vendor-lodash-p73LerAr.js";import"./SectionTitle-DA3XeCcX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={key:0,class:"col-span-6 sm:col-span-4"},K={class:"mt-2"},M=["src","alt"],O={class:"mt-2"},G={class:"col-span-6 sm:col-span-4"},H={class:"col-span-6 sm:col-span-4"},Q={key:0},W={class:"text-sm mt-2"},ie={__name:"UpdateProfileInformationForm",props:{user:Object},setup(c){const b=c,o=j({_method:"PUT",name:b.user.name,email:b.user.email,photo:null}),P=v(null),d=v(null),u=v(null),C=()=>{u.value&&(o.photo=u.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>V()})},N=()=>{P.value=!0},B=()=>{u.value.click()},E=()=>{const a=u.value.files[0];if(!a)return;const m=new FileReader;m.onload=p=>{d.value=p.target.result},m.readAsDataURL(a)},U=()=>{T.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{d.value=null,V()}})},V=()=>{var a;(a=u.value)!=null&&a.value&&(u.value.value=null)},{t}=D();return(a,m)=>(f(),S(A,{onSubmitted:C},{title:l(()=>[i(r(e(t)("profileInformation")),1)]),description:l(()=>[i(r(e(t)("profileInformationDescription")),1)]),form:l(()=>[a.$page.props.jetstream.managesProfilePhotos?(f(),I("div",J,[n("input",{id:"photo",ref_key:"photoInput",ref:u,type:"file",class:"hidden",onChange:E},null,544),s(w,{for:"photo",value:e(t)("photo")},null,8,["value"]),h(n("div",K,[n("img",{src:c.user.profile_photo_url,alt:c.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,M)],512),[[g,!d.value]]),h(n("div",O,[n("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:L("background-image: url('"+d.value+"');")},null,4)],512),[[g,d.value]]),s(x,{class:"mt-2 me-2 lowercase",type:"button",onClick:k(B,["prevent"])},{default:l(()=>[i(r(e(t)("selectNewPhoto")),1)]),_:1}),c.user.profile_photo_path?(f(),S(x,{key:0,type:"button",class:"mt-2 lowercase",onClick:k(U,["prevent"])},{default:l(()=>[i(r(e(t)("deletePhoto")),1)]),_:1})):_("",!0),s(y,{message:e(o).errors.photo,class:"mt-2"},null,8,["message"])])):_("",!0),n("div",G,[s(w,{for:"name",value:e(t)("name")},null,8,["value"]),s($,{id:"name",modelValue:e(o).name,"onUpdate:modelValue":m[0]||(m[0]=p=>e(o).name=p),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),s(y,{message:e(o).errors.name,class:"mt-2"},null,8,["message"])]),n("div",H,[s(w,{for:"email",value:e(t)("email")},null,8,["value"]),s($,{id:"email",modelValue:e(o).email,"onUpdate:modelValue":m[1]||(m[1]=p=>e(o).email=p),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),s(y,{message:e(o).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&c.user.email_verified_at===null?(f(),I("div",Q,[n("p",W,[i(r(e(t)("emailNotVerified"))+" ",1),s(e(q),{href:a.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:k(N,["prevent"])},{default:l(()=>[i(r(e(t)("resendVerificationEmail")),1)]),_:1},8,["href"])]),h(n("div",{class:"mt-2 font-medium text-sm text-green-600"},r(e(t)("verificationLinkSent")),513),[[g,P.value]])])):_("",!0)])]),actions:l(()=>[s(z,{on:e(o).recentlySuccessful,class:"me-3"},{default:l(()=>[i(r(e(t)("saved")),1)]),_:1},8,["on"]),s(R,{class:F({"opacity-25":e(o).processing}),disabled:e(o).processing},{default:l(()=>[i(r(e(t)("save")),1)]),_:1},8,["class","disabled"])]),_:1}))}};export{ie as default};
