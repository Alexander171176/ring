import{T,u as j}from"./app-Bp8GUED0.js";import{_ as I}from"./ActionMessage-BPU_IPhv.js";import{_ as z}from"./Modal-DaWd6ry5.js";import{_ as S}from"./Checkbox-DOnzkO7t.js";import{_ as E}from"./ConfirmationModal-nr41IpL6.js";import{_ as G}from"./DangerButton-B_jKqh0l.js";import{_ as P}from"./DialogModal-6fqBEian.js";import{_ as H}from"./FormSection-DcKmm5ZP.js";import{_ as J,a as L}from"./TextInput-CTDGYsrk.js";import{_ as w}from"./InputLabel-2ZtwOBR0.js";import{_ as D}from"./PrimaryButton-Bhj0kBWG.js";import{_ as $}from"./SecondaryButton-yS4FVESO.js";import{S as M}from"./SectionBorder-CvYZ7egE.js";import{r as x,x as c,P as m,k as a,G as g,D as t,u as e,I as i,J as s,y as h,H as r,F as A,N as C}from"./vue-DrbZvlgE.js";import"./vendor-CGnu3J7H.js";import"./SectionTitle-eGvQqSRO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"col-span-6 sm:col-span-4"},K={key:0,class:"col-span-6"},O={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"flex items-center"},R={class:"ms-2 text-sm text-gray-600"},W={key:0},X={class:"mt-10 sm:mt-0"},Y={class:"space-y-6"},Z={class:"break-all"},ee={class:"flex items-center ms-2"},se={key:0,class:"text-sm text-gray-400"},te=["onClick"],oe=["onClick"],ne={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500 break-all"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:"flex items-center"},ie={class:"ms-2 text-sm text-gray-600"},Ce={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(d){const u=T({name:"",permissions:d.defaultPermissions}),f=T({permissions:[]}),b=T({}),y=x(!1),v=x(null),_=x(null),{t:n}=j(),V=()=>{u.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{y.value=!0,u.reset()}})},F=p=>{f.permissions=p.abilities,v.value=p},B=()=>{f.put(route("api-tokens.update",v.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>v.value=null})},N=p=>{_.value=p},U=()=>{b.delete(route("api-tokens.destroy",_.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>_.value=null})};return(p,l)=>(m(),c("div",null,[a(H,{onSubmitted:V},{title:t(()=>[i(s(e(n)("createApiToken")),1)]),description:t(()=>[i(s(e(n)("apiTokensDescription")),1)]),form:t(()=>[r("div",q,[a(w,{for:"name",value:e(n)("name")},null,8,["value"]),a(J,{id:"name",modelValue:e(u).name,"onUpdate:modelValue":l[0]||(l[0]=o=>e(u).name=o),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(L,{message:e(u).errors.name,class:"mt-2"},null,8,["message"])]),d.availablePermissions.length>0?(m(),c("div",K,[a(w,{for:"permissions",value:e(n)("permissions")},null,8,["value"]),r("div",O,[(m(!0),c(A,null,C(d.availablePermissions,o=>(m(),c("div",{key:o},[r("label",Q,[a(S,{checked:e(u).permissions,"onUpdate:checked":l[1]||(l[1]=k=>e(u).permissions=k),value:o},null,8,["checked","value"]),r("span",R,s(o),1)])]))),128))])])):g("",!0)]),actions:t(()=>[a(I,{on:e(u).recentlySuccessful,class:"me-3"},{default:t(()=>[i(s(e(n)("created")),1)]),_:1},8,["on"]),a(D,{class:h({"opacity-25":e(u).processing}),disabled:e(u).processing},{default:t(()=>[i(s(e(n)("create")),1)]),_:1},8,["class","disabled"])]),_:1}),d.tokens.length>0?(m(),c("div",W,[a(M),r("div",X,[a(z,null,{title:t(()=>[i(s(e(n)("manageApiTokens")),1)]),description:t(()=>[i(s(e(n)("manageApiTokensDescription")),1)]),content:t(()=>[r("div",Y,[(m(!0),c(A,null,C(d.tokens,o=>(m(),c("div",{key:o.id,class:"flex items-center justify-between"},[r("div",Z,s(o.name),1),r("div",ee,[o.last_used_ago?(m(),c("div",se,s(e(n)("lastUsed"))+" "+s(o.last_used_ago),1)):g("",!0),d.availablePermissions.length>0?(m(),c("button",{key:1,class:"cursor-pointer ms-6 text-sm text-gray-400 underline",onClick:k=>F(o)},s(e(n)("permissions")),9,te)):g("",!0),r("button",{class:"cursor-pointer ms-6 text-sm text-red-500",onClick:k=>N(o)},s(e(n)("delete")),9,oe)])]))),128))])]),_:1})])])):g("",!0),a(P,{show:y.value,onClose:l[3]||(l[3]=o=>y.value=!1)},{title:t(()=>[i(s(e(n)("apiToken")),1)]),content:t(()=>[r("div",null,s(e(n)("copyToken")),1),p.$page.props.jetstream.flash.token?(m(),c("div",ne,s(p.$page.props.jetstream.flash.token),1)):g("",!0)]),footer:t(()=>[a($,{onClick:l[2]||(l[2]=o=>y.value=!1)},{default:t(()=>[i(s(e(n)("close")),1)]),_:1})]),_:1},8,["show"]),a(P,{show:v.value!=null,onClose:l[6]||(l[6]=o=>v.value=null)},{title:t(()=>[i(s(e(n)("apiTokenPermissions")),1)]),content:t(()=>[r("div",ae,[(m(!0),c(A,null,C(d.availablePermissions,o=>(m(),c("div",{key:o},[r("label",le,[a(S,{checked:e(f).permissions,"onUpdate:checked":l[4]||(l[4]=k=>e(f).permissions=k),value:o},null,8,["checked","value"]),r("span",ie,s(o),1)])]))),128))])]),footer:t(()=>[a($,{onClick:l[5]||(l[5]=o=>v.value=null)},{default:t(()=>[i(s(e(n)("cancel")),1)]),_:1}),a(D,{class:h(["ms-3",{"opacity-25":e(f).processing}]),disabled:e(f).processing,onClick:B},{default:t(()=>[i(s(e(n)("save")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(E,{show:_.value!=null,onClose:l[8]||(l[8]=o=>_.value=null)},{title:t(()=>[i(s(e(n)("deleteApiToken")),1)]),content:t(()=>[i(s(e(n)("confirmDeleteToken")),1)]),footer:t(()=>[a($,{onClick:l[7]||(l[7]=o=>_.value=null)},{default:t(()=>[i(s(e(n)("cancel")),1)]),_:1}),a(G,{class:h(["ms-3",{"opacity-25":e(b).processing}]),disabled:e(b).processing,onClick:U},{default:t(()=>[i(s(e(n)("delete")),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Ce as default};
